<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>16 Positional analysis in networks | Methods for Network Analysis</title>
  <meta name="description" content="16 Positional analysis in networks | Methods for Network Analysis" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="16 Positional analysis in networks | Methods for Network Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16 Positional analysis in networks | Methods for Network Analysis" />
  
  
  

<meta name="author" content="Mark Hoffman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="homophily-and-exponential-random-graphs-ergm.html"/>
<link rel="next" href="culture-and-networks.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a></li>
<li class="chapter" data-level="1" data-path="reading-list.html"><a href="reading-list.html"><i class="fa fa-check"></i><b>1</b> Reading List</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="reading-list.html"><a href="reading-list.html#week-1-beg.-september-20th-introductions-and-introduction-to-r"><i class="fa fa-check"></i><b>1.0.1</b> Week 1 (beg. September 20th): Introductions and Introduction to R</a></li>
<li class="chapter" data-level="1.0.2" data-path="reading-list.html"><a href="reading-list.html#week-2-beg.-september-27th-types-of-networks"><i class="fa fa-check"></i><b>1.0.2</b> Week 2 (beg. September 27th): Types of networks</a></li>
<li class="chapter" data-level="1.0.3" data-path="reading-list.html"><a href="reading-list.html#week-3-beg.-october-4th-triads-balance-and-hierarchy"><i class="fa fa-check"></i><b>1.0.3</b> Week 3 (beg. October 4th): Triads, Balance and Hierarchy</a></li>
<li class="chapter" data-level="1.0.4" data-path="reading-list.html"><a href="reading-list.html#week-4-beg.-october-11th-centrality-power-and-inequality"><i class="fa fa-check"></i><b>1.0.4</b> Week 4 (beg. October 11th): Centrality, Power, and Inequality</a></li>
<li class="chapter" data-level="1.0.5" data-path="reading-list.html"><a href="reading-list.html#week-5-beg.-october-18th-connectivity-and-the-small-world-problem"><i class="fa fa-check"></i><b>1.0.5</b> Week 5 (beg. October 18th): Connectivity and the Small World Problem</a></li>
<li class="chapter" data-level="1.0.6" data-path="reading-list.html"><a href="reading-list.html#week-6-beg.-october-25th-groups-communities-and-homophily"><i class="fa fa-check"></i><b>1.0.6</b> Week 6 (beg. October 25th): Groups, Communities, and Homophily</a></li>
<li class="chapter" data-level="1.0.7" data-path="reading-list.html"><a href="reading-list.html#week-7-beg.-november-1st-categories-and-positions"><i class="fa fa-check"></i><b>1.0.7</b> Week 7 (beg. November 1st): Categories and Positions</a></li>
<li class="chapter" data-level="1.0.8" data-path="reading-list.html"><a href="reading-list.html#week-8-beg.-november-8th-networks-from-culture-and-culture-from-networks"><i class="fa fa-check"></i><b>1.0.8</b> Week 8 (beg. November 8th): Networks from Culture and Culture from Networks</a></li>
<li class="chapter" data-level="1.0.9" data-path="reading-list.html"><a href="reading-list.html#week-9-beg.-november-15th-dynamics-and-diffusion"><i class="fa fa-check"></i><b>1.0.9</b> Week 9 (beg. November 15th): Dynamics and Diffusion</a></li>
<li class="chapter" data-level="1.0.10" data-path="reading-list.html"><a href="reading-list.html#week-9-and-34-thanksgiving"><i class="fa fa-check"></i><b>1.0.10</b> Week 9 and 3/4: Thanksgiving!</a></li>
<li class="chapter" data-level="1.0.11" data-path="reading-list.html"><a href="reading-list.html#week-10-beg.-november-29th-presentations-of-research"><i class="fa fa-check"></i><b>1.0.11</b> Week 10 (beg. November 29th): Presentations of Research</a></li>
<li class="chapter" data-level="1.0.12" data-path="reading-list.html"><a href="reading-list.html#december-11th-final-papers-are-due."><i class="fa fa-check"></i><b>1.0.12</b> December 11th: Final papers are due.</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Downloading and Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tour-rstudio-with-udacity.html"><a href="tour-rstudio-with-udacity.html"><i class="fa fa-check"></i><b>3</b> Tour RStudio with Udacity</a></li>
<li class="chapter" data-level="4" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>4</b> R Basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-basics.html"><a href="r-basics.html#vectors-matrices-and-data.frames"><i class="fa fa-check"></i><b>4.1</b> Vectors, matrices and data.frames</a></li>
<li class="chapter" data-level="4.2" data-path="r-basics.html"><a href="r-basics.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>4.2</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="4.3" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>4.3</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html"><i class="fa fa-check"></i><b>5</b> Understanding network data structures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#edge-lists"><i class="fa fa-check"></i><b>5.1</b> Edge lists</a></li>
<li class="chapter" data-level="5.2" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#adjacency-matrices"><i class="fa fa-check"></i><b>5.2</b> Adjacency matrices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="your-first-network.html"><a href="your-first-network.html"><i class="fa fa-check"></i><b>6</b> Your First Network</a>
<ul>
<li class="chapter" data-level="6.1" data-path="your-first-network.html"><a href="your-first-network.html#creating-a-project"><i class="fa fa-check"></i><b>6.1</b> Creating a project</a></li>
<li class="chapter" data-level="6.2" data-path="your-first-network.html"><a href="your-first-network.html#creating-data-in-excel"><i class="fa fa-check"></i><b>6.2</b> Creating data in Excel</a></li>
<li class="chapter" data-level="6.3" data-path="your-first-network.html"><a href="your-first-network.html#saving-excel-data-as-a-.csv-file"><i class="fa fa-check"></i><b>6.3</b> Saving Excel data as a .csv file</a></li>
<li class="chapter" data-level="6.4" data-path="your-first-network.html"><a href="your-first-network.html#loading-data-into-r"><i class="fa fa-check"></i><b>6.4</b> Loading data into R</a></li>
<li class="chapter" data-level="6.5" data-path="your-first-network.html"><a href="your-first-network.html#from-data-to-networks"><i class="fa fa-check"></i><b>6.5</b> From data to networks</a></li>
<li class="chapter" data-level="6.6" data-path="your-first-network.html"><a href="your-first-network.html#exploring-your-network"><i class="fa fa-check"></i><b>6.6</b> Exploring your network</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html"><i class="fa fa-check"></i><b>7</b> Network Visualization and Aesthetics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#the-basics"><i class="fa fa-check"></i><b>7.1</b> The Basics</a></li>
<li class="chapter" data-level="7.2" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#layouts"><i class="fa fa-check"></i><b>7.2</b> Layouts</a></li>
<li class="chapter" data-level="7.3" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#adding-attributes-to-a-network-object"><i class="fa fa-check"></i><b>7.3</b> Adding attributes to a network object</a></li>
<li class="chapter" data-level="7.4" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#plotting-based-on-attributes"><i class="fa fa-check"></i><b>7.4</b> Plotting based on attributes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ego-networks.html"><a href="ego-networks.html"><i class="fa fa-check"></i><b>8</b> Ego Networks</a></li>
<li class="chapter" data-level="9" data-path="calculating-network-size-and-density.html"><a href="calculating-network-size-and-density.html"><i class="fa fa-check"></i><b>9</b> Calculating Network Size and Density</a></li>
<li class="chapter" data-level="10" data-path="affiliation-data.html"><a href="affiliation-data.html"><i class="fa fa-check"></i><b>10</b> Affiliation Data</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="affiliation-data.html"><a href="affiliation-data.html#unipartite-projection"><i class="fa fa-check"></i><b>10.0.1</b> Unipartite Projection</a></li>
<li class="chapter" data-level="10.1" data-path="affiliation-data.html"><a href="affiliation-data.html#tripartite-network-analysis"><i class="fa fa-check"></i><b>10.1</b> Tripartite network analysis?</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="affiliation-data.html"><a href="affiliation-data.html#lab"><i class="fa fa-check"></i><b>10.1.1</b> Lab</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html"><i class="fa fa-check"></i><b>11</b> Transitivity, structural balance, and hierarchy</a>
<ul>
<li class="chapter" data-level="11.1" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#the-dyad"><i class="fa fa-check"></i><b>11.1</b> The Dyad</a></li>
<li class="chapter" data-level="11.2" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#generating-a-random-graph-for-comparison"><i class="fa fa-check"></i><b>11.2</b> Generating a random graph for comparison</a></li>
<li class="chapter" data-level="11.3" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#the-triad"><i class="fa fa-check"></i><b>11.3</b> The Triad</a></li>
<li class="chapter" data-level="11.4" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#calculating-a-triad-census"><i class="fa fa-check"></i><b>11.4</b> Calculating a triad census</a></li>
<li class="chapter" data-level="11.5" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#random-graphs-galore"><i class="fa fa-check"></i><b>11.5</b> Random graphs galore!</a></li>
<li class="chapter" data-level="11.6" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#producing-a-tau-statistic"><i class="fa fa-check"></i><b>11.6</b> Producing a tau statistic</a></li>
<li class="chapter" data-level="11.7" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#banning-triads"><i class="fa fa-check"></i><b>11.7</b> Banning triads</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="centrality.html"><a href="centrality.html"><i class="fa fa-check"></i><b>12</b> Centrality</a>
<ul>
<li class="chapter" data-level="12.0.1" data-path="centrality.html"><a href="centrality.html#loading-the-example-network"><i class="fa fa-check"></i><b>12.0.1</b> Loading the example network</a></li>
<li class="chapter" data-level="12.0.2" data-path="centrality.html"><a href="centrality.html#degree-centrality"><i class="fa fa-check"></i><b>12.0.2</b> Degree Centrality</a></li>
<li class="chapter" data-level="12.0.3" data-path="centrality.html"><a href="centrality.html#betweenness-centrality"><i class="fa fa-check"></i><b>12.0.3</b> Betweenness Centrality</a></li>
<li class="chapter" data-level="12.0.4" data-path="centrality.html"><a href="centrality.html#closeness-centrality"><i class="fa fa-check"></i><b>12.0.4</b> Closeness Centrality</a></li>
<li class="chapter" data-level="12.1" data-path="centrality.html"><a href="centrality.html#eigenvector-centrality"><i class="fa fa-check"></i><b>12.1</b> Eigenvector Centrality</a></li>
<li class="chapter" data-level="12.2" data-path="centrality.html"><a href="centrality.html#bonacich-centrality"><i class="fa fa-check"></i><b>12.2</b> Bonacich Centrality</a></li>
<li class="chapter" data-level="12.3" data-path="centrality.html"><a href="centrality.html#page-rank"><i class="fa fa-check"></i><b>12.3</b> Page Rank</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="centrality.html"><a href="centrality.html#measure-correlations"><i class="fa fa-check"></i><b>12.3.1</b> Measure Correlations</a></li>
<li class="chapter" data-level="12.3.2" data-path="centrality.html"><a href="centrality.html#centralization-and-degree-distributions"><i class="fa fa-check"></i><b>12.3.2</b> Centralization and Degree Distributions</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="centrality.html"><a href="centrality.html#distance-weighted-reach"><i class="fa fa-check"></i><b>12.4</b> Distance weighted reach</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html"><i class="fa fa-check"></i><b>13</b> Bridges, Holes, the Small World Problem, and Simulation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#its-a-small-world-after-all."><i class="fa fa-check"></i><b>13.1</b> It’s a small world after all.</a></li>
<li class="chapter" data-level="13.2" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#measuring-connectivity-of-networks"><i class="fa fa-check"></i><b>13.2</b> Measuring connectivity of networks</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#one-last-thing"><i class="fa fa-check"></i><b>13.2.1</b> One last thing…</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html"><i class="fa fa-check"></i><b>14</b> Finding Groups in Networks</a>
<ul>
<li class="chapter" data-level="14.0.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#component-analysis"><i class="fa fa-check"></i><b>14.0.1</b> Component analysis</a></li>
<li class="chapter" data-level="14.0.2" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#cliques"><i class="fa fa-check"></i><b>14.0.2</b> Cliques</a></li>
<li class="chapter" data-level="14.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#cohesive-blocking"><i class="fa fa-check"></i><b>14.1</b> Cohesive Blocking</a></li>
<li class="chapter" data-level="14.2" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#group-detection"><i class="fa fa-check"></i><b>14.2</b> Group Detection</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#modularity"><i class="fa fa-check"></i><b>14.2.1</b> Modularity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html"><i class="fa fa-check"></i><b>15</b> Homophily and Exponential Random Graphs (ERGM)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html#homophily"><i class="fa fa-check"></i><b>15.1</b> Homophily</a></li>
<li class="chapter" data-level="15.2" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html#ergms"><i class="fa fa-check"></i><b>15.2</b> ERGMs</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html"><i class="fa fa-check"></i><b>16</b> Positional analysis in networks</a>
<ul>
<li class="chapter" data-level="16.1" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#toy-data"><i class="fa fa-check"></i><b>16.1</b> Toy data</a></li>
<li class="chapter" data-level="16.2" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#structural-equivalence"><i class="fa fa-check"></i><b>16.2</b> Structural equivalence</a></li>
<li class="chapter" data-level="16.3" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#block-modeling-with-concor"><i class="fa fa-check"></i><b>16.3</b> Block Modeling with CONCOR</a></li>
<li class="chapter" data-level="16.4" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#isomorphic-local-graphs"><i class="fa fa-check"></i><b>16.4</b> Isomorphic local graphs</a></li>
<li class="chapter" data-level="16.5" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#stochastic-block-models-sbms"><i class="fa fa-check"></i><b>16.5</b> Stochastic Block Models (SBMs)</a></li>
<li class="chapter" data-level="16.6" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#feature-based-strategies"><i class="fa fa-check"></i><b>16.6</b> Feature-based strategies</a></li>
<li class="chapter" data-level="16.7" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#lab-try-these-different-strategies-on-a-real-graph-of-your-choosing-go-with-smaller-networks-and-compare-the-different-results-using-correlation.-which-methods-perform-similarly-do-the-roles-that-they-identify-look-meaningful-plot-the-network-coloring-the-nodes-by-role."><i class="fa fa-check"></i><b>16.7</b> Lab: Try these different strategies on a real graph of your choosing (go with smaller networks) and compare the different results using correlation. Which methods perform similarly? Do the roles that they identify look meaningful? Plot the network coloring the nodes by role.</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="culture-and-networks.html"><a href="culture-and-networks.html"><i class="fa fa-check"></i><b>17</b> Culture and Networks</a>
<ul>
<li class="chapter" data-level="17.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#rca"><i class="fa fa-check"></i><b>17.1</b> RCA</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-1"><i class="fa fa-check"></i><b>17.1.1</b> Group 1</a></li>
<li class="chapter" data-level="17.1.2" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-4"><i class="fa fa-check"></i><b>17.1.2</b> Group 4:</a></li>
<li class="chapter" data-level="17.1.3" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-5"><i class="fa fa-check"></i><b>17.1.3</b> Group 5:</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="culture-and-networks.html"><a href="culture-and-networks.html#semantic-network-analysis"><i class="fa fa-check"></i><b>17.2</b> Semantic Network Analysis</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#counting-words"><i class="fa fa-check"></i><b>17.2.1</b> Counting Words</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="culture-and-networks.html"><a href="culture-and-networks.html#from-counts-to-a-document-to-term-matrix"><i class="fa fa-check"></i><b>17.3</b> From counts to a document-to-term matrix</a></li>
<li class="chapter" data-level="17.4" data-path="culture-and-networks.html"><a href="culture-and-networks.html#producing-a-skip-gram-matrix-for-semantic-network-analysis-and-embedding-models"><i class="fa fa-check"></i><b>17.4</b> Producing a skip-gram matrix for semantic network analysis and embedding models</a></li>
<li class="chapter" data-level="17.5" data-path="culture-and-networks.html"><a href="culture-and-networks.html#comparing-texts-with-cosine"><i class="fa fa-check"></i><b>17.5</b> Comparing texts with cosine</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dynamics.html"><a href="dynamics.html"><i class="fa fa-check"></i><b>18</b> Dynamics</a>
<ul>
<li class="chapter" data-level="18.1" data-path="dynamics.html"><a href="dynamics.html#tergms"><i class="fa fa-check"></i><b>18.1</b> TERGMs</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="dynamics.html"><a href="dynamics.html#tergm-terms-and-types"><i class="fa fa-check"></i><b>18.1.1</b> TERGM terms and types</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="dynamics.html"><a href="dynamics.html#tergm-syntax"><i class="fa fa-check"></i><b>18.2</b> <code>tergm</code> syntax</a></li>
<li class="chapter" data-level="18.3" data-path="dynamics.html"><a href="dynamics.html#rsiena--"><i class="fa fa-check"></i><b>18.3</b> RSiena -</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Methods for Network Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="positional-analysis-in-networks" class="section level1" number="16">
<h1><span class="header-section-number">16</span> Positional analysis in networks</h1>
<p>This tutorial covers positional analysis in networks. Positional analysis seeks to identify actors or groups of actors who occupy similar positions or roles in a network. Nodes are therefore not grouped because they share more connections with each other than with other nodes in the network, as in modularity-based community or group detection, but rather because they share similar, or even precisely the same, <em>patterns</em> of relations. These positions might be though of as roles - in so far as people who occupy similar positions also perform similar functions for the graph - though this need not be the case.</p>
<p>However, compared to many of the other strategies we have so far seen for grouping and comparing nodes, positional analysis is particularly fraught with difficulty. It relies on one being able to identify which nodes are structurally equivalent, or more specifically, which nodes have identical or similar sets of relations across all other actors in a graph. This would be easy if we just wanted to know if two nodes shared the same exact set of relations - we could just calculate how different their relations are over the other nodes in the network and identify those pairs of nodes who have precisely the relations - but this exact form of equivalence is, in the real world, quite rare. In practice, we are interested in a more generalized notion of structural equivalence, one in which nodes are seen as sharing a position or role not when they have relations with the exact same people, but rather when they share patterns of relations that are generally similar.</p>
<p>There are a number of strategies for identifying roles or positions in a network. Here, we cover three such strategies: 1) CONCOR, which evaluates approximate structural equivalence to identify positions, 2) stochastic block modeling, which uses a more relaxed notion of stochastic equivalence to identify positions, and 3) feature-based strategies for learning roles in a network.</p>
<p>Block modeling of this sort is not implemented in igraph, so for much of this tutorial, we will have to rely on our own code.</p>
<div id="toy-data" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Toy data</h2>
<p>Let’s make a toy network, where structurally equivalent nodes are easy to identify by eye, against which we can compare the different methods.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="positional-analysis-in-networks.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb323-2"><a href="positional-analysis-in-networks.html#cb323-2" aria-hidden="true" tabindex="-1"></a>el <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Ego =</span> <span class="fu">c</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;Q&quot;</span>, <span class="st">&quot;Q&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="at">Alter =</span> <span class="fu">c</span>(<span class="st">&quot;P&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;I&quot;</span>, <span class="st">&quot;J&quot;</span>))</span>
<span id="cb323-3"><a href="positional-analysis-in-networks.html#cb323-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-4"><a href="positional-analysis-in-networks.html#cb323-4" aria-hidden="true" tabindex="-1"></a>net <span class="ot">&lt;-</span> <span class="fu">graph.edgelist</span>(<span class="fu">as.matrix</span>(el), <span class="at">directed =</span> T)</span></code></pre></div>
<p>What does the network look like? Let’s plot it, and color nodes by their equivalence class.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="positional-analysis-in-networks.html#cb324-1" aria-hidden="true" tabindex="-1"></a>layout_save <span class="ot">&lt;-</span> <span class="fu">layout_with_fr</span>(net)</span>
<span id="cb324-2"><a href="positional-analysis-in-networks.html#cb324-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.color =</span> true_class, </span>
<span id="cb324-3"><a href="positional-analysis-in-networks.html#cb324-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb324-4"><a href="positional-analysis-in-networks.html#cb324-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> layout_save)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-200-1.png" width="672" /></p>
</div>
<div id="structural-equivalence" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Structural equivalence</h2>
<p>Let’s begin with an exact measure of structural equivalence - two nodes will be deemed structurally equivalent if they have precisely the same set of relations across all other nodes in the network. To evaluate this, we could simply identify which nodes have exactly the same set of neighbors, or using a matrix, take the absolute difference in row values for two nodes.</p>
<p>We extract the adjacency matrix.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="positional-analysis-in-networks.html#cb325-1" aria-hidden="true" tabindex="-1"></a>adj_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adj</span>(net))</span></code></pre></div>
<p>Here is an example for nodes Q and A.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="positional-analysis-in-networks.html#cb326-1" aria-hidden="true" tabindex="-1"></a>a_row <span class="ot">&lt;-</span> adj_mat[<span class="st">&quot;Q&quot;</span>, <span class="sc">!</span><span class="fu">colnames</span>(adj_mat) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;A&quot;</span>)]</span>
<span id="cb326-2"><a href="positional-analysis-in-networks.html#cb326-2" aria-hidden="true" tabindex="-1"></a>b_row <span class="ot">&lt;-</span> adj_mat[<span class="st">&quot;A&quot;</span>, <span class="sc">!</span><span class="fu">colnames</span>(adj_mat) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;A&quot;</span>)]</span>
<span id="cb326-3"><a href="positional-analysis-in-networks.html#cb326-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-4"><a href="positional-analysis-in-networks.html#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co"># equivalent?</span></span>
<span id="cb326-5"><a href="positional-analysis-in-networks.html#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">abs</span>(a_row<span class="sc">-</span>b_row))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>The sum of their absolute differences greater than 0, so we would say they are not precisely equivalent. Let’s extrapolate to every pair of nodes in the network with a function.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="positional-analysis-in-networks.html#cb328-1" aria-hidden="true" tabindex="-1"></a>perfect_equivalence <span class="ot">&lt;-</span> <span class="cf">function</span>(mat){</span>
<span id="cb328-2"><a href="positional-analysis-in-networks.html#cb328-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make an empty version of the matrix where we will store equivalence values</span></span>
<span id="cb328-3"><a href="positional-analysis-in-networks.html#cb328-3" aria-hidden="true" tabindex="-1"></a>  matrix_vals <span class="ot">&lt;-</span> mat</span>
<span id="cb328-4"><a href="positional-analysis-in-networks.html#cb328-4" aria-hidden="true" tabindex="-1"></a>  matrix_vals[] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb328-5"><a href="positional-analysis-in-networks.html#cb328-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># loop over the actors in the network, comparing pair-wise their values </span></span>
<span id="cb328-6"><a href="positional-analysis-in-networks.html#cb328-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mat)){</span>
<span id="cb328-7"><a href="positional-analysis-in-networks.html#cb328-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mat)){</span>
<span id="cb328-8"><a href="positional-analysis-in-networks.html#cb328-8" aria-hidden="true" tabindex="-1"></a>      a_row <span class="ot">&lt;-</span> mat[i, <span class="fu">c</span>(<span class="sc">-</span>i, <span class="sc">-</span>j)]</span>
<span id="cb328-9"><a href="positional-analysis-in-networks.html#cb328-9" aria-hidden="true" tabindex="-1"></a>      b_row <span class="ot">&lt;-</span> mat[j, <span class="fu">c</span>(<span class="sc">-</span>i, <span class="sc">-</span>j)]</span>
<span id="cb328-10"><a href="positional-analysis-in-networks.html#cb328-10" aria-hidden="true" tabindex="-1"></a>      abs_diff <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">abs</span>(a_row<span class="sc">-</span>b_row)) <span class="co"># take sum of absolute differences </span></span>
<span id="cb328-11"><a href="positional-analysis-in-networks.html#cb328-11" aria-hidden="true" tabindex="-1"></a>      matrix_vals[i,j] <span class="ot">&lt;-</span> abs_diff</span>
<span id="cb328-12"><a href="positional-analysis-in-networks.html#cb328-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb328-13"><a href="positional-analysis-in-networks.html#cb328-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb328-14"><a href="positional-analysis-in-networks.html#cb328-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return results</span></span>
<span id="cb328-15"><a href="positional-analysis-in-networks.html#cb328-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(matrix_vals)</span>
<span id="cb328-16"><a href="positional-analysis-in-networks.html#cb328-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now we apply the function to our network/matrix. What do you see?</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="positional-analysis-in-networks.html#cb329-1" aria-hidden="true" tabindex="-1"></a>structurally_equivalent <span class="ot">&lt;-</span> <span class="fu">perfect_equivalence</span>(adj_mat)</span>
<span id="cb329-2"><a href="positional-analysis-in-networks.html#cb329-2" aria-hidden="true" tabindex="-1"></a>structurally_equivalent</span></code></pre></div>
<pre><code>##   Q P A B C D E F G H I J
## Q 0 2 3 3 6 6 3 3 3 3 3 3
## P 2 0 1 1 3 3 0 0 0 0 0 0
## A 3 1 0 2 3 4 1 1 1 1 1 1
## B 3 1 2 0 4 3 1 1 1 1 1 1
## C 6 3 3 4 0 6 2 2 2 3 3 3
## D 6 3 4 3 6 0 3 3 3 2 2 2
## E 3 0 1 1 2 3 0 0 0 0 0 0
## F 3 0 1 1 2 3 0 0 0 0 0 0
## G 3 0 1 1 2 3 0 0 0 0 0 0
## H 3 0 1 1 3 2 0 0 0 0 0 0
## I 3 0 1 1 3 2 0 0 0 0 0 0
## J 3 0 1 1 3 2 0 0 0 0 0 0</code></pre>
<p>Let’s convert this distance matrix to a similarity matrix.</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="positional-analysis-in-networks.html#cb331-1" aria-hidden="true" tabindex="-1"></a>structurally_equivalent_sim <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>(structurally_equivalent<span class="sc">/</span><span class="fu">max</span>(structurally_equivalent))</span></code></pre></div>
<p>We can now cluster this similarity matrix to identify sets of similar actors using k-means, for example. If we set the number of clusters equal to 6, it will pull out the set of actors who have precisely the same relations. If we set it equal to 5 or 4, it will show us actors who are proximately similar.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="positional-analysis-in-networks.html#cb332-1" aria-hidden="true" tabindex="-1"></a>group_ids_6 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(structurally_equivalent_sim, <span class="at">centers =</span> <span class="dv">6</span>)</span>
<span id="cb332-2"><a href="positional-analysis-in-networks.html#cb332-2" aria-hidden="true" tabindex="-1"></a>group_ids_5 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(structurally_equivalent_sim, <span class="at">centers =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>How close do we get?</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="positional-analysis-in-networks.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, </span>
<span id="cb333-2"><a href="positional-analysis-in-networks.html#cb333-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color =</span> group_ids_5<span class="sc">$</span>cluster, </span>
<span id="cb333-3"><a href="positional-analysis-in-networks.html#cb333-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> layout_save)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-207-1.png" width="672" /></p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="positional-analysis-in-networks.html#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, </span>
<span id="cb334-2"><a href="positional-analysis-in-networks.html#cb334-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color =</span> group_ids_6<span class="sc">$</span>cluster, </span>
<span id="cb334-3"><a href="positional-analysis-in-networks.html#cb334-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> layout_save)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-208-1.png" width="672" /></p>
<p>Close, but there is a problem. This strategy appears to treat C and D as occupying different positions. Why is that? Well, it has to do with our strict definition of structural equivalence - which relies on comparing the precise set of actors that each node is connected to. As a result, our method is confusing similarity with closeness, and as a result, it turns out, nodes that we deem structurally equivalent can never be more than two steps away from one another.</p>
</div>
<div id="block-modeling-with-concor" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Block Modeling with CONCOR</h2>
<p>Before we deal with our definitional problem, let’s work through the CONCOR algorithm, introduced by Breiger et al. and made use of by White, Boorman, and Breiger in their seminal paper, <strong>Social Structure from Multiple Networks. I. Blockmodels of Roles and Positions</strong>. This method relies a similar definition of equivalence as the one outlined above - it identifies structurally equivalent nodes through correlating their relation sets - but because it uses correlation, and implements the stacking of matrices, it allows one to produce a block model of multiple relations simultaneously.</p>
<p>CONCOR measures structural equivalence using correlation (that is, we measure the similarity between people in terms of the pattern of their relations). The cor function measures correlation.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="positional-analysis-in-networks.html#cb335-1" aria-hidden="true" tabindex="-1"></a>net_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">get.adjacency</span>(net))</span>
<span id="cb335-2"><a href="positional-analysis-in-networks.html#cb335-2" aria-hidden="true" tabindex="-1"></a>net_cor <span class="ot">=</span> <span class="fu">cor</span>(net_mat)</span></code></pre></div>
<pre><code>## Warning in cor(net_mat): the standard deviation is zero</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="positional-analysis-in-networks.html#cb337-1" aria-hidden="true" tabindex="-1"></a>net_cor[] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(net_cor[]), <span class="dv">0</span>, net_cor[])</span></code></pre></div>
<p>The key insight of CONCOR is that, by repeatedly running correlation on the results of this initial correlation, the data will eventually converge to only -1s and 1s. Let’s try 100 times and see how it goes.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="positional-analysis-in-networks.html#cb338-1" aria-hidden="true" tabindex="-1"></a>net_concor <span class="ot">&lt;-</span> net_cor</span>
<span id="cb338-2"><a href="positional-analysis-in-networks.html#cb338-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">200</span>){</span>
<span id="cb338-3"><a href="positional-analysis-in-networks.html#cb338-3" aria-hidden="true" tabindex="-1"></a>  net_concor <span class="ot">&lt;-</span> <span class="fu">cor</span>(net_concor)</span>
<span id="cb338-4"><a href="positional-analysis-in-networks.html#cb338-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>How does it look? It appears to have converged!</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="positional-analysis-in-networks.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(net_concor)</span></code></pre></div>
<pre><code>## [1] -1  1</code></pre>
<p>Now what? First, we identify people who have 1s vs. -1s and group them together. These are our initial blocks, for a 2 block solution.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="positional-analysis-in-networks.html#cb341-1" aria-hidden="true" tabindex="-1"></a>group <span class="ot">&lt;-</span> net_concor[, <span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">0</span></span></code></pre></div>
<p>We can split the original data into each of the respective groups.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="positional-analysis-in-networks.html#cb342-1" aria-hidden="true" tabindex="-1"></a>split_results <span class="ot">&lt;-</span> <span class="fu">list</span>(net_mat[, <span class="fu">names</span>(group[group])], net_mat[, <span class="fu">names</span>(group[<span class="sc">!</span>group])])</span></code></pre></div>
<p>Now, if we want we can run the same thing above again, on each of the groups.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="positional-analysis-in-networks.html#cb343-1" aria-hidden="true" tabindex="-1"></a>cor_many_times <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">times =</span> <span class="dv">1000</span>){</span>
<span id="cb343-2"><a href="positional-analysis-in-networks.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>times){</span>
<span id="cb343-3"><a href="positional-analysis-in-networks.html#cb343-3" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">cor</span>(x)</span>
<span id="cb343-4"><a href="positional-analysis-in-networks.html#cb343-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">sd</span>(x, <span class="at">na.rm =</span> T) <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb343-5"><a href="positional-analysis-in-networks.html#cb343-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(x)</span>
<span id="cb343-6"><a href="positional-analysis-in-networks.html#cb343-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb343-7"><a href="positional-analysis-in-networks.html#cb343-7" aria-hidden="true" tabindex="-1"></a>      x[] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x[]), <span class="dv">0</span>, x[])</span>
<span id="cb343-8"><a href="positional-analysis-in-networks.html#cb343-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb343-9"><a href="positional-analysis-in-networks.html#cb343-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb343-10"><a href="positional-analysis-in-networks.html#cb343-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb343-11"><a href="positional-analysis-in-networks.html#cb343-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb343-12"><a href="positional-analysis-in-networks.html#cb343-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-13"><a href="positional-analysis-in-networks.html#cb343-13" aria-hidden="true" tabindex="-1"></a>split_results_corred <span class="ot">&lt;-</span> <span class="fu">lapply</span>(split_results, cor_many_times)</span></code></pre></div>
<pre><code>## Warning in cor(x): the standard deviation is zero</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="positional-analysis-in-networks.html#cb345-1" aria-hidden="true" tabindex="-1"></a>groups_2 <span class="ot">&lt;-</span> <span class="fu">lapply</span>(split_results_corred, <span class="cf">function</span>(x) x[, <span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb345-2"><a href="positional-analysis-in-networks.html#cb345-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-3"><a href="positional-analysis-in-networks.html#cb345-3" aria-hidden="true" tabindex="-1"></a>split_results_again <span class="ot">&lt;-</span> <span class="fu">lapply</span>(groups_2, </span>
<span id="cb345-4"><a href="positional-analysis-in-networks.html#cb345-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="cf">function</span>(x)  <span class="fu">list</span>(net_mat[, <span class="fu">names</span>(x[x])], net_mat[, <span class="fu">names</span>(x[<span class="sc">!</span>x])]))</span>
<span id="cb345-5"><a href="positional-analysis-in-networks.html#cb345-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-6"><a href="positional-analysis-in-networks.html#cb345-6" aria-hidden="true" tabindex="-1"></a>split_results_again <span class="ot">&lt;-</span> <span class="fu">unlist</span>(split_results_again, <span class="at">recursive =</span> F)</span>
<span id="cb345-7"><a href="positional-analysis-in-networks.html#cb345-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-8"><a href="positional-analysis-in-networks.html#cb345-8" aria-hidden="true" tabindex="-1"></a>final_blocks <span class="ot">&lt;-</span> <span class="fu">lapply</span>(split_results_again, colnames)</span>
<span id="cb345-9"><a href="positional-analysis-in-networks.html#cb345-9" aria-hidden="true" tabindex="-1"></a>final_blocks</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Q&quot; &quot;C&quot; &quot;D&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot;
## 
## [[2]]
## [1] &quot;P&quot; &quot;A&quot; &quot;B&quot;
## 
## [[3]]
## [1] &quot;E&quot; &quot;F&quot; &quot;G&quot;
## 
## [[4]]
## NULL</code></pre>
<p>We can also plot the result using the blockmodel() function from the sna package (part of statnet).</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="positional-analysis-in-networks.html#cb347-1" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(final_blocks), <span class="cf">function</span>(x) <span class="fu">rep</span>(x, <span class="fu">length</span>(final_blocks[[x]])))</span>
<span id="cb347-2"><a href="positional-analysis-in-networks.html#cb347-2" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> <span class="fu">unlist</span>(clusters)</span>
<span id="cb347-3"><a href="positional-analysis-in-networks.html#cb347-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(clusters) <span class="ot">=</span> <span class="fu">unlist</span>(final_blocks)</span>
<span id="cb347-4"><a href="positional-analysis-in-networks.html#cb347-4" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> clusters[<span class="fu">colnames</span>(net_mat)]</span>
<span id="cb347-5"><a href="positional-analysis-in-networks.html#cb347-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb347-6"><a href="positional-analysis-in-networks.html#cb347-6" aria-hidden="true" tabindex="-1"></a>all_output <span class="ot">=</span> sna<span class="sc">::</span><span class="fu">blockmodel</span>(net_mat, </span>
<span id="cb347-7"><a href="positional-analysis-in-networks.html#cb347-7" aria-hidden="true" tabindex="-1"></a>                             clusters, </span>
<span id="cb347-8"><a href="positional-analysis-in-networks.html#cb347-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">glabels =</span> <span class="st">&quot;Feudal Network&quot;</span>, </span>
<span id="cb347-9"><a href="positional-analysis-in-networks.html#cb347-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plabels =</span> <span class="fu">colnames</span>(net_mat))</span>
<span id="cb347-10"><a href="positional-analysis-in-networks.html#cb347-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(all_output)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-215-1.png" width="672" /></p>
<p>Here is the plot of the graph, where nodes are colored by position.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="positional-analysis-in-networks.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.color =</span> clusters)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-216-1.png" width="672" /></p>
<p>Not very good!</p>
</div>
<div id="isomorphic-local-graphs" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Isomorphic local graphs</h2>
<p>CONCOR allows us to apply our structural equivalence routine across many relations simultaneously, but it doesn’t quite solve the issue of how to identify actors who are precise structural equivalents. First, we could try to relax the condition that nodes be tied to precisely the same set of nodes by defining them as structurally equivalent as long as their local neighborhoods (set to include nodes n steps away) are automorphic. The underlying algorithm, bliss, essentially permutes the matrices of the two networks it is comparing to see if, under any of the different permutations, the two matrices are equivalent. Since the matrices are being permuted, we are ignoring node labels (i.e. node ids) and focusing instead on the structure of their relations.</p>
<p>First, we select neighborhood size. For now, we set it to 2.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="positional-analysis-in-networks.html#cb349-1" aria-hidden="true" tabindex="-1"></a>steps <span class="ot">=</span> <span class="dv">2</span></span></code></pre></div>
<p>Next, we extract each node’s 2-step neighborhood using igraph’s handy make_ego_graph() function.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="positional-analysis-in-networks.html#cb350-1" aria-hidden="true" tabindex="-1"></a>local_graphs <span class="ot">&lt;-</span> <span class="fu">make_ego_graph</span>(net, <span class="at">order =</span> steps)</span></code></pre></div>
<p>Then, we loop through the different local neighborhoods and evaluate whether they are automorphic, saving the result in a matrix. We convert the matrix (which is logical) to a numeric matrix (so that TRUE = 1 and FALSE = 0), and set the diagonal to 0.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="positional-analysis-in-networks.html#cb351-1" aria-hidden="true" tabindex="-1"></a>iso_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">FALSE</span>, <span class="at">nrow =</span> <span class="fu">length</span>(local_graphs), <span class="at">ncol =</span> <span class="fu">length</span>(local_graphs))</span>
<span id="cb351-2"><a href="positional-analysis-in-networks.html#cb351-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(local_graphs)){</span>
<span id="cb351-3"><a href="positional-analysis-in-networks.html#cb351-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(local_graphs)){</span>
<span id="cb351-4"><a href="positional-analysis-in-networks.html#cb351-4" aria-hidden="true" tabindex="-1"></a>    iso_mat[i,j] <span class="ot">&lt;-</span> <span class="fu">isomorphic</span>(local_graphs[[i]], local_graphs[[j]])</span>
<span id="cb351-5"><a href="positional-analysis-in-networks.html#cb351-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb351-6"><a href="positional-analysis-in-networks.html#cb351-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb351-7"><a href="positional-analysis-in-networks.html#cb351-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb351-8"><a href="positional-analysis-in-networks.html#cb351-8" aria-hidden="true" tabindex="-1"></a>iso_mat[] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(iso_mat[])</span>
<span id="cb351-9"><a href="positional-analysis-in-networks.html#cb351-9" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(iso_mat) <span class="ot">=</span> <span class="dv">0</span></span></code></pre></div>
<p>We then cluster the resulting matrix in order to identify nodes who share isomorphic neighborhoods, using a network clustering strategy.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="positional-analysis-in-networks.html#cb352-1" aria-hidden="true" tabindex="-1"></a>clusters_iso <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(<span class="fu">graph.adjacency</span>(iso_mat, <span class="at">mode =</span> <span class="st">&quot;undirected&quot;</span>))</span></code></pre></div>
<p>Let’s plot the result.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="positional-analysis-in-networks.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, </span>
<span id="cb353-2"><a href="positional-analysis-in-networks.html#cb353-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color =</span> <span class="fu">membership</span>(clusters_iso), </span>
<span id="cb353-3"><a href="positional-analysis-in-networks.html#cb353-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> layout_save )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-221-1.png" width="672" /></p>
<p>Wow, it worked! By relaxing the assumption that structurally equivalent nodes are tied to the same precise set of nodes, we get better results.. So why not just this strategy all the time?</p>
<p>There are a couple of reasons. First, evaluating whether two neighborhoods are isomorphic is easy and quick when neighborhoods are small, but very soon becomes computationally costly (prohibitively so) as they grow. Also, this strategy is highly sensitive to missing data - if one of edge is missing or randomly rewired, then the two neighborhoods won’t be viewed as isomorphic.</p>
<p>So.. let’s relax our assumptions even further.</p>
</div>
<div id="stochastic-block-models-sbms" class="section level2" number="16.5">
<h2><span class="header-section-number">16.5</span> Stochastic Block Models (SBMs)</h2>
<p>Now that we can identify blocks using featurs, CONCOR and a relatively strict measure of structural equivalence, let’s try to generalize our measure of equivalence even further. One such generalization is that rather than sharing the same set of nodes, actors that share a role or position will have the same probability of being attached to all other alters in the network. Under this operationalization, equivalence is not absolute, but probabilistic (and hence, stochastic).</p>
<p>Stochastic block models are quite difficult to program, but thankfully, there is already an R package which can fit them to data, blockmodels. Let’s install it.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="positional-analysis-in-networks.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;blockmodels&quot;</span>)</span></code></pre></div>
<p>And load it into R.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="positional-analysis-in-networks.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(blockmodels)</span></code></pre></div>
<p>Here we run an SBM on just the marriage network.</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="positional-analysis-in-networks.html#cb356-1" aria-hidden="true" tabindex="-1"></a>sbm_out <span class="ot">&lt;-</span> <span class="fu">BM_bernoulli</span>(<span class="st">&quot;SBM&quot;</span>, </span>
<span id="cb356-2"><a href="positional-analysis-in-networks.html#cb356-2" aria-hidden="true" tabindex="-1"></a>                             net_mat, </span>
<span id="cb356-3"><a href="positional-analysis-in-networks.html#cb356-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">verbosity =</span> <span class="dv">3</span>, </span>
<span id="cb356-4"><a href="positional-analysis-in-networks.html#cb356-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plotting =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb356-5"><a href="positional-analysis-in-networks.html#cb356-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">exploration_factor =</span> <span class="dv">5</span>) <span class="co"># run a bernoulli block model on the feudal matrix. </span></span>
<span id="cb356-6"><a href="positional-analysis-in-networks.html#cb356-6" aria-hidden="true" tabindex="-1"></a><span class="co"># bernoulli is for when your edge weights are binary</span></span>
<span id="cb356-7"><a href="positional-analysis-in-networks.html#cb356-7" aria-hidden="true" tabindex="-1"></a><span class="co"># poisson is for when your edge weights are counts</span></span>
<span id="cb356-8"><a href="positional-analysis-in-networks.html#cb356-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gaussian (i.e. normal distribution) is for when your edge weights are continuous variables</span></span>
<span id="cb356-9"><a href="positional-analysis-in-networks.html#cb356-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-10"><a href="positional-analysis-in-networks.html#cb356-10" aria-hidden="true" tabindex="-1"></a><span class="co"># estimate the result</span></span>
<span id="cb356-11"><a href="positional-analysis-in-networks.html#cb356-11" aria-hidden="true" tabindex="-1"></a>sbm_out<span class="sc">$</span><span class="fu">estimate</span>()</span></code></pre></div>
<pre><code>## -&gt; Estimation for 1 groups
## 
-&gt; Computation of eigen decomposition used for initalizations
## 
## -&gt; Pass 1
##     -&gt; With ascending number of groups
##         -&gt; For 2 groups
## 
        -&gt; For 3 groups
## 
        -&gt; For 4 groups
## 
        -&gt; For 5 groups
## 
    -&gt; With descending number of groups
##         -&gt; For 4 groups
## 

        -&gt; For 3 groups
## 
        -&gt; For 2 groups
## 
-&gt; Pass 2
##     -&gt; With ascending number of groups
##         -&gt; For 2 groups
##         -&gt; For 3 groups
##         -&gt; For 4 groups
##         -&gt; For 5 groups
## 
    -&gt; With descending number of groups
##         -&gt; For 4 groups
##         -&gt; For 3 groups
##         -&gt; For 2 groups
## -&gt; Pass 3
##     -&gt; With ascending number of groups
##         -&gt; For 2 groups
##         -&gt; For 3 groups
##         -&gt; For 4 groups
##         -&gt; For 5 groups
##     -&gt; With descending number of groups
##         -&gt; For 4 groups
##         -&gt; For 3 groups
##         -&gt; For 2 groups</code></pre>
<p>Now we can extract the role assignments (which are probabilistic).</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="positional-analysis-in-networks.html#cb358-1" aria-hidden="true" tabindex="-1"></a>best_fit_assignments <span class="ot">&lt;-</span> sbm_out<span class="sc">$</span>memberships[[<span class="fu">which.min</span>(sbm_out<span class="sc">$</span>ICL)]] <span class="co"># extract the fit which is best according to ICL (Integrated Completed Likelihood), a measure for selecting the best model</span></span>
<span id="cb358-2"><a href="positional-analysis-in-networks.html#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(best_fit_assignments<span class="sc">$</span>Z) <span class="co"># probabilities of belonging to each group</span></span></code></pre></div>
<pre><code>##             [,1]        [,2]        [,3]        [,4]        [,5]
## [1,] 0.008130081 0.008130081 0.008130081 0.008130081 0.967479675
## [2,] 0.008180839 0.008180839 0.948836318 0.026621164 0.008180839
## [3,] 0.008130081 0.008130081 0.967479675 0.008130081 0.008130081
## [4,] 0.008130081 0.008130081 0.967479675 0.008130081 0.008130081
## [5,] 0.967479675 0.008130081 0.008130081 0.008130081 0.008130081
## [6,] 0.967479675 0.008130081 0.008130081 0.008130081 0.008130081</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="positional-analysis-in-networks.html#cb360-1" aria-hidden="true" tabindex="-1"></a>class_assignments <span class="ot">&lt;-</span> <span class="fu">apply</span>(best_fit_assignments<span class="sc">$</span>Z, <span class="dv">1</span>, which.max) <span class="co"># identify which column as the highest value for each node (row)</span></span></code></pre></div>
<p>And we can plot the results, just like before, using the blockmodel function from sna</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="positional-analysis-in-networks.html#cb361-1" aria-hidden="true" tabindex="-1"></a>sbm_output <span class="ot">=</span> sna<span class="sc">::</span><span class="fu">blockmodel</span>(net_mat, </span>
<span id="cb361-2"><a href="positional-analysis-in-networks.html#cb361-2" aria-hidden="true" tabindex="-1"></a>                             class_assignments, </span>
<span id="cb361-3"><a href="positional-analysis-in-networks.html#cb361-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">glabels =</span> <span class="st">&quot;Feudal&quot;</span>, </span>
<span id="cb361-4"><a href="positional-analysis-in-networks.html#cb361-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plabels =</span> <span class="fu">colnames</span>(net_mat))</span>
<span id="cb361-5"><a href="positional-analysis-in-networks.html#cb361-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-6"><a href="positional-analysis-in-networks.html#cb361-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sbm_output)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-226-1.png" width="672" /></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="positional-analysis-in-networks.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.color =</span> class_assignments)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-226-2.png" width="672" /></p>
<p>Pretty bad too… it seems to just be picking up degree (or something close to it).</p>
</div>
<div id="feature-based-strategies" class="section level2" number="16.6">
<h2><span class="header-section-number">16.6</span> Feature-based strategies</h2>
<p>Finally, an idea which is currently being used in computer science is to capture features for nodes to classify them into kinds of roles and positions depending on that feature set. For example, we could measure nodes’ centralities, the motifs in their local neighborhoods (i.e. triangles/MAN), their average distance from other nodes, etc. and then cluster them according to those features. In a sense, this assumes the least about the data and also is most feasible for large graphs (since such features are usually computationally trivial to measure). Here is a quick example:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="positional-analysis-in-networks.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this function limits the network to a given node&#39;s neighborhood (defined n-steps away) and then runs the triad census on that neighborhood.</span></span>
<span id="cb363-2"><a href="positional-analysis-in-networks.html#cb363-2" aria-hidden="true" tabindex="-1"></a>local_man <span class="ot">&lt;-</span> <span class="cf">function</span>(net, vertex_name, <span class="at">steps =</span> <span class="dv">2</span>){</span>
<span id="cb363-3"><a href="positional-analysis-in-networks.html#cb363-3" aria-hidden="true" tabindex="-1"></a>  n_steps <span class="ot">&lt;-</span> <span class="fu">ego</span>(net, <span class="at">order =</span> steps, vertex_name, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb363-4"><a href="positional-analysis-in-networks.html#cb363-4" aria-hidden="true" tabindex="-1"></a>  subnet <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">delete.vertices</span>(net, <span class="sc">!</span><span class="fu">V</span>(net) <span class="sc">%in%</span> n_steps)</span>
<span id="cb363-5"><a href="positional-analysis-in-networks.html#cb363-5" aria-hidden="true" tabindex="-1"></a>  local_triad_count <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">triad.census</span>(subnet)</span>
<span id="cb363-6"><a href="positional-analysis-in-networks.html#cb363-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(local_triad_count)</span>
<span id="cb363-7"><a href="positional-analysis-in-networks.html#cb363-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb363-8"><a href="positional-analysis-in-networks.html#cb363-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-9"><a href="positional-analysis-in-networks.html#cb363-9" aria-hidden="true" tabindex="-1"></a>onestep_triad_counts <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(net)<span class="sc">$</span>name, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">local_man</span>(net, x, <span class="at">steps =</span> <span class="dv">1</span>))</span>
<span id="cb363-10"><a href="positional-analysis-in-networks.html#cb363-10" aria-hidden="true" tabindex="-1"></a>twostep_triad_counts <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(net)<span class="sc">$</span>name, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">local_man</span>(net, x, <span class="at">steps =</span> <span class="dv">2</span>))</span>
<span id="cb363-11"><a href="positional-analysis-in-networks.html#cb363-11" aria-hidden="true" tabindex="-1"></a>threestep_triad_counts <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(net)<span class="sc">$</span>name, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">local_man</span>(net, x, <span class="at">steps =</span> <span class="dv">3</span>))</span>
<span id="cb363-12"><a href="positional-analysis-in-networks.html#cb363-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-13"><a href="positional-analysis-in-networks.html#cb363-13" aria-hidden="true" tabindex="-1"></a>onestep_triad_counts <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, onestep_triad_counts)</span>
<span id="cb363-14"><a href="positional-analysis-in-networks.html#cb363-14" aria-hidden="true" tabindex="-1"></a>twostep_triad_counts <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, twostep_triad_counts)</span>
<span id="cb363-15"><a href="positional-analysis-in-networks.html#cb363-15" aria-hidden="true" tabindex="-1"></a>threestep_triad_counts <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, threestep_triad_counts)</span>
<span id="cb363-16"><a href="positional-analysis-in-networks.html#cb363-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-17"><a href="positional-analysis-in-networks.html#cb363-17" aria-hidden="true" tabindex="-1"></a><span class="co"># different centrality measures</span></span>
<span id="cb363-18"><a href="positional-analysis-in-networks.html#cb363-18" aria-hidden="true" tabindex="-1"></a>indegrees <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb363-19"><a href="positional-analysis-in-networks.html#cb363-19" aria-hidden="true" tabindex="-1"></a>outdegrees <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>)</span>
<span id="cb363-20"><a href="positional-analysis-in-networks.html#cb363-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-21"><a href="positional-analysis-in-networks.html#cb363-21" aria-hidden="true" tabindex="-1"></a><span class="co"># average distance with other nodes</span></span>
<span id="cb363-22"><a href="positional-analysis-in-networks.html#cb363-22" aria-hidden="true" tabindex="-1"></a>average_distances <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(<span class="fu">distances</span>(net))</span>
<span id="cb363-23"><a href="positional-analysis-in-networks.html#cb363-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-24"><a href="positional-analysis-in-networks.html#cb363-24" aria-hidden="true" tabindex="-1"></a><span class="co"># put them all together</span></span>
<span id="cb363-25"><a href="positional-analysis-in-networks.html#cb363-25" aria-hidden="true" tabindex="-1"></a>graph_features <span class="ot">&lt;-</span> <span class="fu">cbind</span>(onestep_triad_counts, twostep_triad_counts, threestep_triad_counts, indegrees, outdegrees, average_distances)</span>
<span id="cb363-26"><a href="positional-analysis-in-networks.html#cb363-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-27"><a href="positional-analysis-in-networks.html#cb363-27" aria-hidden="true" tabindex="-1"></a><span class="co"># run kmeans on the resulting dataset</span></span>
<span id="cb363-28"><a href="positional-analysis-in-networks.html#cb363-28" aria-hidden="true" tabindex="-1"></a>cluster_ids <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(graph_features, <span class="dv">5</span>)<span class="sc">$</span>cluster</span>
<span id="cb363-29"><a href="positional-analysis-in-networks.html#cb363-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-30"><a href="positional-analysis-in-networks.html#cb363-30" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the results</span></span>
<span id="cb363-31"><a href="positional-analysis-in-networks.html#cb363-31" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.color =</span> cluster_ids)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-227-1.png" width="672" /></p>
<p>Pretty good! Of course, we knew the number of roles (k) beforehand. There are algorithms for choosing k if it is not known. This strategy can be very dependent on the set of features you include.</p>
</div>
<div id="lab-try-these-different-strategies-on-a-real-graph-of-your-choosing-go-with-smaller-networks-and-compare-the-different-results-using-correlation.-which-methods-perform-similarly-do-the-roles-that-they-identify-look-meaningful-plot-the-network-coloring-the-nodes-by-role." class="section level2" number="16.7">
<h2><span class="header-section-number">16.7</span> Lab: Try these different strategies on a real graph of your choosing (go with smaller networks) and compare the different results using correlation. Which methods perform similarly? Do the roles that they identify look meaningful? Plot the network coloring the nodes by role.</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="homophily-and-exponential-random-graphs-ergm.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="culture-and-networks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
