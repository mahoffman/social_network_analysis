<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Transitivity, structural balance, and hierarchy | Methods for Network Analysis</title>
  <meta name="description" content="11 Transitivity, structural balance, and hierarchy | Methods for Network Analysis" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Transitivity, structural balance, and hierarchy | Methods for Network Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Transitivity, structural balance, and hierarchy | Methods for Network Analysis" />
  
  
  

<meta name="author" content="Mark Hoffman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="affiliation-data.html"/>
<link rel="next" href="centrality.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a></li>
<li class="chapter" data-level="1" data-path="reading-list.html"><a href="reading-list.html"><i class="fa fa-check"></i><b>1</b> Reading List</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="reading-list.html"><a href="reading-list.html#week-1-beg.-september-20th-introductions-and-introduction-to-r"><i class="fa fa-check"></i><b>1.0.1</b> Week 1 (beg. September 20th): Introductions and Introduction to R</a></li>
<li class="chapter" data-level="1.0.2" data-path="reading-list.html"><a href="reading-list.html#week-2-beg.-september-27th-types-of-networks"><i class="fa fa-check"></i><b>1.0.2</b> Week 2 (beg. September 27th): Types of networks</a></li>
<li class="chapter" data-level="1.0.3" data-path="reading-list.html"><a href="reading-list.html#week-3-beg.-october-4th-triads-balance-and-hierarchy"><i class="fa fa-check"></i><b>1.0.3</b> Week 3 (beg. October 4th): Triads, Balance and Hierarchy</a></li>
<li class="chapter" data-level="1.0.4" data-path="reading-list.html"><a href="reading-list.html#week-4-beg.-october-11th-centrality-power-and-inequality"><i class="fa fa-check"></i><b>1.0.4</b> Week 4 (beg. October 11th): Centrality, Power, and Inequality</a></li>
<li class="chapter" data-level="1.0.5" data-path="reading-list.html"><a href="reading-list.html#week-5-beg.-october-18th-connectivity-and-the-small-world-problem"><i class="fa fa-check"></i><b>1.0.5</b> Week 5 (beg. October 18th): Connectivity and the Small World Problem</a></li>
<li class="chapter" data-level="1.0.6" data-path="reading-list.html"><a href="reading-list.html#week-6-beg.-october-25th-groups-communities-and-homophily"><i class="fa fa-check"></i><b>1.0.6</b> Week 6 (beg. October 25th): Groups, Communities, and Homophily</a></li>
<li class="chapter" data-level="1.0.7" data-path="reading-list.html"><a href="reading-list.html#week-7-beg.-november-1st-categories-and-positions"><i class="fa fa-check"></i><b>1.0.7</b> Week 7 (beg. November 1st): Categories and Positions</a></li>
<li class="chapter" data-level="1.0.8" data-path="reading-list.html"><a href="reading-list.html#week-8-beg.-november-8th-networks-from-culture-and-culture-from-networks"><i class="fa fa-check"></i><b>1.0.8</b> Week 8 (beg. November 8th): Networks from Culture and Culture from Networks</a></li>
<li class="chapter" data-level="1.0.9" data-path="reading-list.html"><a href="reading-list.html#week-9-beg.-november-15th-dynamics-and-diffusion"><i class="fa fa-check"></i><b>1.0.9</b> Week 9 (beg. November 15th): Dynamics and Diffusion</a></li>
<li class="chapter" data-level="1.0.10" data-path="reading-list.html"><a href="reading-list.html#week-9-and-34-thanksgiving"><i class="fa fa-check"></i><b>1.0.10</b> Week 9 and 3/4: Thanksgiving!</a></li>
<li class="chapter" data-level="1.0.11" data-path="reading-list.html"><a href="reading-list.html#week-10-beg.-november-29th-presentations-of-research"><i class="fa fa-check"></i><b>1.0.11</b> Week 10 (beg. November 29th): Presentations of Research</a></li>
<li class="chapter" data-level="1.0.12" data-path="reading-list.html"><a href="reading-list.html#december-11th-final-papers-are-due."><i class="fa fa-check"></i><b>1.0.12</b> December 11th: Final papers are due.</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Downloading and Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tour-rstudio-with-udacity.html"><a href="tour-rstudio-with-udacity.html"><i class="fa fa-check"></i><b>3</b> Tour RStudio with Udacity</a></li>
<li class="chapter" data-level="4" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>4</b> R Basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-basics.html"><a href="r-basics.html#vectors-matrices-and-data.frames"><i class="fa fa-check"></i><b>4.1</b> Vectors, matrices and data.frames</a></li>
<li class="chapter" data-level="4.2" data-path="r-basics.html"><a href="r-basics.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>4.2</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="4.3" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>4.3</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html"><i class="fa fa-check"></i><b>5</b> Understanding network data structures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#edge-lists"><i class="fa fa-check"></i><b>5.1</b> Edge lists</a></li>
<li class="chapter" data-level="5.2" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#adjacency-matrices"><i class="fa fa-check"></i><b>5.2</b> Adjacency matrices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="your-first-network.html"><a href="your-first-network.html"><i class="fa fa-check"></i><b>6</b> Your First Network</a>
<ul>
<li class="chapter" data-level="6.1" data-path="your-first-network.html"><a href="your-first-network.html#creating-a-project"><i class="fa fa-check"></i><b>6.1</b> Creating a project</a></li>
<li class="chapter" data-level="6.2" data-path="your-first-network.html"><a href="your-first-network.html#creating-data-in-excel"><i class="fa fa-check"></i><b>6.2</b> Creating data in Excel</a></li>
<li class="chapter" data-level="6.3" data-path="your-first-network.html"><a href="your-first-network.html#saving-excel-data-as-a-.csv-file"><i class="fa fa-check"></i><b>6.3</b> Saving Excel data as a .csv file</a></li>
<li class="chapter" data-level="6.4" data-path="your-first-network.html"><a href="your-first-network.html#loading-data-into-r"><i class="fa fa-check"></i><b>6.4</b> Loading data into R</a></li>
<li class="chapter" data-level="6.5" data-path="your-first-network.html"><a href="your-first-network.html#from-data-to-networks"><i class="fa fa-check"></i><b>6.5</b> From data to networks</a></li>
<li class="chapter" data-level="6.6" data-path="your-first-network.html"><a href="your-first-network.html#exploring-your-network"><i class="fa fa-check"></i><b>6.6</b> Exploring your network</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html"><i class="fa fa-check"></i><b>7</b> Network Visualization and Aesthetics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#the-basics"><i class="fa fa-check"></i><b>7.1</b> The Basics</a></li>
<li class="chapter" data-level="7.2" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#layouts"><i class="fa fa-check"></i><b>7.2</b> Layouts</a></li>
<li class="chapter" data-level="7.3" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#adding-attributes-to-a-network-object"><i class="fa fa-check"></i><b>7.3</b> Adding attributes to a network object</a></li>
<li class="chapter" data-level="7.4" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#plotting-based-on-attributes"><i class="fa fa-check"></i><b>7.4</b> Plotting based on attributes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ego-networks.html"><a href="ego-networks.html"><i class="fa fa-check"></i><b>8</b> Ego Networks</a></li>
<li class="chapter" data-level="9" data-path="calculating-network-size-and-density.html"><a href="calculating-network-size-and-density.html"><i class="fa fa-check"></i><b>9</b> Calculating Network Size and Density</a></li>
<li class="chapter" data-level="10" data-path="affiliation-data.html"><a href="affiliation-data.html"><i class="fa fa-check"></i><b>10</b> Affiliation Data</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="affiliation-data.html"><a href="affiliation-data.html#unipartite-projection"><i class="fa fa-check"></i><b>10.0.1</b> Unipartite Projection</a></li>
<li class="chapter" data-level="10.1" data-path="affiliation-data.html"><a href="affiliation-data.html#tripartite-network-analysis"><i class="fa fa-check"></i><b>10.1</b> Tripartite network analysis?</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="affiliation-data.html"><a href="affiliation-data.html#lab"><i class="fa fa-check"></i><b>10.1.1</b> Lab</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html"><i class="fa fa-check"></i><b>11</b> Transitivity, structural balance, and hierarchy</a>
<ul>
<li class="chapter" data-level="11.1" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#the-dyad"><i class="fa fa-check"></i><b>11.1</b> The Dyad</a></li>
<li class="chapter" data-level="11.2" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#generating-a-random-graph-for-comparison"><i class="fa fa-check"></i><b>11.2</b> Generating a random graph for comparison</a></li>
<li class="chapter" data-level="11.3" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#the-triad"><i class="fa fa-check"></i><b>11.3</b> The Triad</a></li>
<li class="chapter" data-level="11.4" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#calculating-a-triad-census"><i class="fa fa-check"></i><b>11.4</b> Calculating a triad census</a></li>
<li class="chapter" data-level="11.5" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#random-graphs-galore"><i class="fa fa-check"></i><b>11.5</b> Random graphs galore!</a></li>
<li class="chapter" data-level="11.6" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#producing-a-tau-statistic"><i class="fa fa-check"></i><b>11.6</b> Producing a tau statistic</a></li>
<li class="chapter" data-level="11.7" data-path="transitivity-structural-balance-and-hierarchy.html"><a href="transitivity-structural-balance-and-hierarchy.html#banning-triads"><i class="fa fa-check"></i><b>11.7</b> Banning triads</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="centrality.html"><a href="centrality.html"><i class="fa fa-check"></i><b>12</b> Centrality</a>
<ul>
<li class="chapter" data-level="12.0.1" data-path="centrality.html"><a href="centrality.html#loading-the-example-network"><i class="fa fa-check"></i><b>12.0.1</b> Loading the example network</a></li>
<li class="chapter" data-level="12.0.2" data-path="centrality.html"><a href="centrality.html#degree-centrality"><i class="fa fa-check"></i><b>12.0.2</b> Degree Centrality</a></li>
<li class="chapter" data-level="12.0.3" data-path="centrality.html"><a href="centrality.html#betweenness-centrality"><i class="fa fa-check"></i><b>12.0.3</b> Betweenness Centrality</a></li>
<li class="chapter" data-level="12.0.4" data-path="centrality.html"><a href="centrality.html#closeness-centrality"><i class="fa fa-check"></i><b>12.0.4</b> Closeness Centrality</a></li>
<li class="chapter" data-level="12.1" data-path="centrality.html"><a href="centrality.html#eigenvector-centrality"><i class="fa fa-check"></i><b>12.1</b> Eigenvector Centrality</a></li>
<li class="chapter" data-level="12.2" data-path="centrality.html"><a href="centrality.html#bonacich-centrality"><i class="fa fa-check"></i><b>12.2</b> Bonacich Centrality</a></li>
<li class="chapter" data-level="12.3" data-path="centrality.html"><a href="centrality.html#page-rank"><i class="fa fa-check"></i><b>12.3</b> Page Rank</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="centrality.html"><a href="centrality.html#measure-correlations"><i class="fa fa-check"></i><b>12.3.1</b> Measure Correlations</a></li>
<li class="chapter" data-level="12.3.2" data-path="centrality.html"><a href="centrality.html#centralization-and-degree-distributions"><i class="fa fa-check"></i><b>12.3.2</b> Centralization and Degree Distributions</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="centrality.html"><a href="centrality.html#distance-weighted-reach"><i class="fa fa-check"></i><b>12.4</b> Distance weighted reach</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html"><i class="fa fa-check"></i><b>13</b> Bridges, Holes, the Small World Problem, and Simulation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#its-a-small-world-after-all."><i class="fa fa-check"></i><b>13.1</b> It’s a small world after all.</a></li>
<li class="chapter" data-level="13.2" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#measuring-connectivity-of-networks"><i class="fa fa-check"></i><b>13.2</b> Measuring connectivity of networks</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="bridges-holes-the-small-world-problem-and-simulation.html"><a href="bridges-holes-the-small-world-problem-and-simulation.html#one-last-thing"><i class="fa fa-check"></i><b>13.2.1</b> One last thing…</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html"><i class="fa fa-check"></i><b>14</b> Finding Groups in Networks</a>
<ul>
<li class="chapter" data-level="14.0.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#component-analysis"><i class="fa fa-check"></i><b>14.0.1</b> Component analysis</a></li>
<li class="chapter" data-level="14.0.2" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#cliques"><i class="fa fa-check"></i><b>14.0.2</b> Cliques</a></li>
<li class="chapter" data-level="14.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#cohesive-blocking"><i class="fa fa-check"></i><b>14.1</b> Cohesive Blocking</a></li>
<li class="chapter" data-level="14.2" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#group-detection"><i class="fa fa-check"></i><b>14.2</b> Group Detection</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="finding-groups-in-networks.html"><a href="finding-groups-in-networks.html#modularity"><i class="fa fa-check"></i><b>14.2.1</b> Modularity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html"><i class="fa fa-check"></i><b>15</b> Homophily and Exponential Random Graphs (ERGM)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html#homophily"><i class="fa fa-check"></i><b>15.1</b> Homophily</a></li>
<li class="chapter" data-level="15.2" data-path="homophily-and-exponential-random-graphs-ergm.html"><a href="homophily-and-exponential-random-graphs-ergm.html#ergms"><i class="fa fa-check"></i><b>15.2</b> ERGMs</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html"><i class="fa fa-check"></i><b>16</b> Positional analysis in networks</a>
<ul>
<li class="chapter" data-level="16.1" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#toy-data"><i class="fa fa-check"></i><b>16.1</b> Toy data</a></li>
<li class="chapter" data-level="16.2" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#structural-equivalence"><i class="fa fa-check"></i><b>16.2</b> Structural equivalence</a></li>
<li class="chapter" data-level="16.3" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#block-modeling-with-concor"><i class="fa fa-check"></i><b>16.3</b> Block Modeling with CONCOR</a></li>
<li class="chapter" data-level="16.4" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#isomorphic-local-graphs"><i class="fa fa-check"></i><b>16.4</b> Isomorphic local graphs</a></li>
<li class="chapter" data-level="16.5" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#stochastic-block-models-sbms"><i class="fa fa-check"></i><b>16.5</b> Stochastic Block Models (SBMs)</a></li>
<li class="chapter" data-level="16.6" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#feature-based-strategies"><i class="fa fa-check"></i><b>16.6</b> Feature-based strategies</a></li>
<li class="chapter" data-level="16.7" data-path="positional-analysis-in-networks.html"><a href="positional-analysis-in-networks.html#lab-try-these-different-strategies-on-a-real-graph-of-your-choosing-go-with-smaller-networks-and-compare-the-different-results-using-correlation.-which-methods-perform-similarly-do-the-roles-that-they-identify-look-meaningful-plot-the-network-coloring-the-nodes-by-role."><i class="fa fa-check"></i><b>16.7</b> Lab: Try these different strategies on a real graph of your choosing (go with smaller networks) and compare the different results using correlation. Which methods perform similarly? Do the roles that they identify look meaningful? Plot the network coloring the nodes by role.</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="culture-and-networks.html"><a href="culture-and-networks.html"><i class="fa fa-check"></i><b>17</b> Culture and Networks</a>
<ul>
<li class="chapter" data-level="17.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#rca"><i class="fa fa-check"></i><b>17.1</b> RCA</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-1"><i class="fa fa-check"></i><b>17.1.1</b> Group 1</a></li>
<li class="chapter" data-level="17.1.2" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-4"><i class="fa fa-check"></i><b>17.1.2</b> Group 4:</a></li>
<li class="chapter" data-level="17.1.3" data-path="culture-and-networks.html"><a href="culture-and-networks.html#group-5"><i class="fa fa-check"></i><b>17.1.3</b> Group 5:</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="culture-and-networks.html"><a href="culture-and-networks.html#semantic-network-analysis"><i class="fa fa-check"></i><b>17.2</b> Semantic Network Analysis</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="culture-and-networks.html"><a href="culture-and-networks.html#counting-words"><i class="fa fa-check"></i><b>17.2.1</b> Counting Words</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="culture-and-networks.html"><a href="culture-and-networks.html#from-counts-to-a-document-to-term-matrix"><i class="fa fa-check"></i><b>17.3</b> From counts to a document-to-term matrix</a></li>
<li class="chapter" data-level="17.4" data-path="culture-and-networks.html"><a href="culture-and-networks.html#producing-a-skip-gram-matrix-for-semantic-network-analysis-and-embedding-models"><i class="fa fa-check"></i><b>17.4</b> Producing a skip-gram matrix for semantic network analysis and embedding models</a></li>
<li class="chapter" data-level="17.5" data-path="culture-and-networks.html"><a href="culture-and-networks.html#comparing-texts-with-cosine"><i class="fa fa-check"></i><b>17.5</b> Comparing texts with cosine</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dynamics.html"><a href="dynamics.html"><i class="fa fa-check"></i><b>18</b> Dynamics</a>
<ul>
<li class="chapter" data-level="18.1" data-path="dynamics.html"><a href="dynamics.html#tergms"><i class="fa fa-check"></i><b>18.1</b> TERGMs</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="dynamics.html"><a href="dynamics.html#tergm-terms-and-types"><i class="fa fa-check"></i><b>18.1.1</b> TERGM terms and types</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="dynamics.html"><a href="dynamics.html#tergm-syntax"><i class="fa fa-check"></i><b>18.2</b> <code>tergm</code> syntax</a></li>
<li class="chapter" data-level="18.3" data-path="dynamics.html"><a href="dynamics.html#rsiena--"><i class="fa fa-check"></i><b>18.3</b> RSiena -</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Methods for Network Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transitivity-structural-balance-and-hierarchy" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Transitivity, structural balance, and hierarchy</h1>
<p>The main goal of this tutorial is to delve more deeply into the microfoundations of networks, such as dyads and tryads. We will learn the basic functions for measuring reciprocity, transitivity, the triad census, and for identifying cliques. We will also learn how to “ban” triads from a graph, and begin to think about whether our graphs deviate, in a statistical sense, from what we might expect by chance, one way of evaluating whether our results are “meaningful”.</p>
<p>Through this tutorial, we will rely on igraph to analyze the comm59 Add Health network that we made use of last class.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the edge list from our github</span></span>
<span id="cb144-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-2" aria-hidden="true" tabindex="-1"></a>el <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/mahoffman/stanford_networks/main/data/comm59.dat.txt&quot;</span>, <span class="at">header =</span> T)</span>
<span id="cb144-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in attributes from our github</span></span>
<span id="cb144-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-4" aria-hidden="true" tabindex="-1"></a>attributes <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/mahoffman/stanford_networks/main/data/comm59_att.dat.txt&quot;</span>, <span class="at">header =</span> T)</span>
<span id="cb144-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="co"># add an ID column</span></span>
<span id="cb144-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb144-6" aria-hidden="true" tabindex="-1"></a>attributes<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(attributes)</span></code></pre></div>
<p>Next let’s graph it as a network, ignoring the ranking of friendships for now.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First read in igraph</span></span>
<span id="cb145-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb145-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Indexing data so that you only put in certain columns</span></span>
<span id="cb145-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-5" aria-hidden="true" tabindex="-1"></a>el_no_weight <span class="ot">&lt;-</span> el[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># We will ignore the ranking variable for now.</span></span>
<span id="cb145-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-6" aria-hidden="true" tabindex="-1"></a>el_no_weight <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(el_no_weight) <span class="co"># igraph requires a matrix</span></span>
<span id="cb145-7"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-8"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="co"># convert ids to characters so they are preserved as names</span></span>
<span id="cb145-9"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-9" aria-hidden="true" tabindex="-1"></a>el_no_weight[,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">as.character</span>(el_no_weight[,<span class="dv">1</span>])</span>
<span id="cb145-10"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-10" aria-hidden="true" tabindex="-1"></a>el_no_weight[,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">as.character</span>(el_no_weight[,<span class="dv">2</span>])</span>
<span id="cb145-11"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-12"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph the network</span></span>
<span id="cb145-13"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-13" aria-hidden="true" tabindex="-1"></a>net59 <span class="ot">&lt;-</span> <span class="fu">graph.edgelist</span>(el_no_weight, <span class="at">directed =</span> T)</span>
<span id="cb145-14"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-15"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, add attributes  </span></span>
<span id="cb145-16"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-16" aria-hidden="true" tabindex="-1"></a><span class="co"># First link vertex names to their place in the attribute dataset</span></span>
<span id="cb145-17"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-17" aria-hidden="true" tabindex="-1"></a>linked_ids <span class="ot">&lt;-</span> <span class="fu">match</span>(<span class="fu">V</span>(net59)<span class="sc">$</span>name, attributes<span class="sc">$</span>ID)</span>
<span id="cb145-18"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-19"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Then we can use that to assign a variable to each user in the network</span></span>
<span id="cb145-20"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-20" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(net59)<span class="sc">$</span>race <span class="ot">&lt;-</span> attributes<span class="sc">$</span>race[linked_ids]</span>
<span id="cb145-21"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-21" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(net59)<span class="sc">$</span>sex <span class="ot">&lt;-</span> attributes<span class="sc">$</span>sex[linked_ids]</span>
<span id="cb145-22"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-22" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(net59)<span class="sc">$</span>grade <span class="ot">&lt;-</span> attributes<span class="sc">$</span>grade[linked_ids]</span>
<span id="cb145-23"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-23" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(net59)<span class="sc">$</span>school <span class="ot">&lt;-</span> attributes<span class="sc">$</span>school[linked_ids]</span>
<span id="cb145-24"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-25"><a href="transitivity-structural-balance-and-hierarchy.html#cb145-25" aria-hidden="true" tabindex="-1"></a>net59 <span class="co"># Great!</span></span></code></pre></div>
<pre><code>## IGRAPH c726991 DN-- 975 4160 -- 
## + attr: name (v/c), race (v/n), sex (v/n), grade (v/n), school (v/n)
## + edges from c726991 (vertex names):
##  [1] 1 -&gt;191 1 -&gt;245 1 -&gt;272 1 -&gt;413 1 -&gt;447 3 -&gt;21  3 -&gt;221 3 -&gt;480 3 -&gt;495
## [10] 3 -&gt;574 5 -&gt;96  5 -&gt;258 5 -&gt;335 6 -&gt;271 6 -&gt;374 6 -&gt;400 6 -&gt;489 6 -&gt;491
## [19] 6 -&gt;573 6 -&gt;586 7 -&gt;134 7 -&gt;159 7 -&gt;464 7 -&gt;478 8 -&gt;221 8 -&gt;284 8 -&gt;378
## [28] 8 -&gt;557 9 -&gt;137 9 -&gt;442 9 -&gt;473 9 -&gt;498 10-&gt;20  10-&gt;22  10-&gt;64  10-&gt;75 
## [37] 10-&gt;89  10-&gt;219 10-&gt;272 10-&gt;276 11-&gt;101 11-&gt;155 11-&gt;190 11-&gt;273 11-&gt;337
## [46] 11-&gt;339 11-&gt;353 11-&gt;616 12-&gt;188 12-&gt;475 14-&gt;20  14-&gt;151 14-&gt;597 15-&gt;106
## [55] 15-&gt;189 15-&gt;233 15-&gt;325 15-&gt;333 15-&gt;449 15-&gt;491 15-&gt;552 15-&gt;624 15-&gt;627
## [64] 16-&gt;30  16-&gt;201 16-&gt;217 16-&gt;267 16-&gt;268 16-&gt;466 16-&gt;569 17-&gt;625 19-&gt;45 
## + ... omitted several edges</code></pre>
<div id="the-dyad" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> The Dyad</h2>
<p>We can break large social networks down into their constituent parts. These constituent parts are referred to as “motifs”. The most basic motif consists of two nodes and is called a dyad. Edges in a network signify the presence or absence of dyadic relations. It follows that a dyad in an undirected network can have two unique configurations: connected or disconnected; and three unique configurations in a directed network (mutual, assymetric, and null)</p>
<p>Density captures, at the macro-level, the proportion of dyads that are present over the possible total number of dyads in the network. We are simply re-framing what we discussed last class, except we are focusing on the configuration of nodes as opposed to edges.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(net59)</span></code></pre></div>
<pre><code>## [1] 0.004380561</code></pre>
<p>A related concept is that of reciprocity, a measure which pertains only to directed graphs. Reciprocity is the tendency with which affect, or network ties, sent out by egos are returned by alters. Edges are reciprocal when ego and alter both send each other ties; reciprocity is the graph-level analogue, evaluating the tendency for edges to be reciprocal across the whole network.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reciprocity</span>(net59)</span></code></pre></div>
<pre><code>## [1] 0.39375</code></pre>
<p>So our graph has a reciprocity score of 0.39. Is that high or low? It depends on your expectation. If you are from a society with a strong taboo against unrequited affect, then it might seem low. If you come from an individualistic society, it might seem high.</p>
</div>
<div id="generating-a-random-graph-for-comparison" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Generating a random graph for comparison</h2>
<p>One way network scholars evaluate whether a given descriptive statistic is high or low is to compare it to the value that obtains under a random network of similar density. In random graphs, the chance that any two dyads are in a relation is determined by chance (i.e. the flip of a coin). This means that the likelihood of observing a given tie is independent from observing a tie between any other dyad.</p>
<p>There are a lot of reasons that this is unrealistic.. For example, if A and B are friends and A and C are friends, then we would expect the probability that B and C are friends to be higher. That is, you are more likely to be friends with your friends friends than with strangers. This is a basic feature of most social networks and one that was emphasized in our readings this week on transitivity. Even in dyads, if someone shows you affection you are more likely to return it. We therefore might want to factor in this human tendency towards triadic and dyadic closure into our null model - later in the class we will discuss ways of doing this. That said, random graphs have many properties that are mathematically and heuristically useful, which is why they are commonly used as null models.</p>
<p>igraph has a fast and easy function for generating random graphs.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb151-1" aria-hidden="true" tabindex="-1"></a>?erdos.renyi.game</span></code></pre></div>
<p>In an erdos.renyi.graph, each edge has the same probability of being created. We determine the probability and it returns a random graph with a density that equals (in expectation) this probability.</p>
<p>First, we need to calculate the density and number of nodes in our graph.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb152-1" aria-hidden="true" tabindex="-1"></a>net59_n <span class="ot">&lt;-</span> <span class="fu">vcount</span>(net59)</span>
<span id="cb152-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb152-2" aria-hidden="true" tabindex="-1"></a>net59_density <span class="ot">&lt;-</span> <span class="fu">graph.density</span>(net59)</span></code></pre></div>
<p>Then we can input those into the erdos.renyi.game function provided by igraph to generate a network of the same size and density, but with edges that are random re-arranged.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb153-1" aria-hidden="true" tabindex="-1"></a>random_graph <span class="ot">&lt;-</span> <span class="fu">erdos.renyi.game</span>(<span class="at">n =</span> net59_n, <span class="at">p.or.m =</span> net59_density, <span class="at">directed =</span> <span class="cn">TRUE</span>) <span class="co"># where n is the number of nodes, p.or.m is the probability of drawing an edge, directed is whether the network is directed or not</span></span></code></pre></div>
<p>Let’s take a look at the graph.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(random_graph,  </span>
<span id="cb154-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">2</span>, </span>
<span id="cb154-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label =</span> <span class="cn">NA</span>, </span>
<span id="cb154-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.curved =</span> .<span class="dv">1</span>, </span>
<span id="cb154-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color =</span> <span class="st">&quot;tomato&quot;</span>, </span>
<span id="cb154-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> .<span class="dv">1</span>, </span>
<span id="cb154-7"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.width =</span> .<span class="dv">5</span>, </span>
<span id="cb154-8"><a href="transitivity-structural-balance-and-hierarchy.html#cb154-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">&quot;grey60&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>It looks like a bowl of spaghetti - that is how you know you indeed have a random graph on your hands. What is its reciprocity?</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reciprocity</span>(random_graph)</span></code></pre></div>
<pre><code>## [1] 0.005187456</code></pre>
<p>0.003! So our network exhibits far more reciprocity than we would expect if people were affiliating randomly.</p>
</div>
<div id="the-triad" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> The Triad</h2>
<p>Triads consist of three nodes and are therefore more complex than dyads, with more possible arrangements.</p>
<p>This becomes clear when you realize an undirected triad consists of <em>three</em> dyads: A and B, B and C, and A and C.</p>
<p>In an undirected graph, there are eight possible triads (2^3… sort of obvious given that each dyad can be present or absent and there are three dyads). Of those eight possible triads, four are isomorphic, so that there are four unique triads.</p>
<p>In an directed graph, there will be sixteen unique triads (the unique number of motifs in directed graphs is not easily reduced to a functional form). These sixteen unique triads give rise to the MAN framework as well as the triad census, which we discussed in class.</p>
<p>The triad census calculates how many triads there are of each type (which, as I just mentioned, in a directed network amounts to 16). If we see a network with very few complete (003) triads, then we know something about the macro-level structure, just by looking at the frequencies of its constituent parts at the micro-level. By extension, if the whole distribution of triads is very different than the distribution that obtains under a random network, then we hopefully learn something about the macro-level structure that we couldn’t observe just by looking at a visualization of the network.</p>
</div>
<div id="calculating-a-triad-census" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Calculating a triad census</h2>
<p>igraph has a built in function for the triad census: triad.census()</p>
<p>It takes a network object as an argument and returns the number of each type of triad in the network.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">triad.census</span>(net59)</span></code></pre></div>
<pre><code>##  [1] 150776065   2416731    785249      3621      4325      5165      4028
##  [8]      3619       450        23      1019       294       320       137
## [15]       385       144</code></pre>
<p>As you can see, it returns 16 different numbers. It uses the M-A-N classification structure: M stands for the number of Mutual ties, A stands for the number of Asymmetric ties, and N stands for the number of Null ties.</p>
<p>Mutual means that ego and alter (say A and B) have a mutual relation with each other (A likes B and B likes A). A means that ego and alter have an asymmetric relation with one another, i.e. A likes B but B doesn’t like A… the relation is not reciprocated. Finally, N means that A and B do not have any relation.</p>
<p>The image below visualizes the different types of triads possible in a directed graph.</p>
<p><img src="Images/triad_census.jpg"/></p>
<p>?triad.census also describes these possible types, telling you the order that the triad types are presented in the triad.census() output.</p>
<p>003 for example means there are 0 mutual relation, 0 asymmetric relations and 3 null relations. This triad contains no relations. 201 would mean there are two mutual relations, zero asymmetric relations, and 1 null relation. Of three dyads in the triad, two dyads are in a relation, and one dyad is not.</p>
<p>For now let’s look at the triad census of our random graph.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">triad.census</span>(random_graph)</span></code></pre></div>
<pre><code>##  [1] 149922316   4032304     10523      9164      8976     18013        94
##  [8]        86        79        20         0         0         0         0
## [15]         0         0</code></pre>
<p>Most triads are null. This is because edges only have a 5% chance of being drawn. It follows that 95% of the total possible edges are missing.</p>
<p>There are not many cases of transitive triads, or even in which all three dyads have a relationship. Thus, the majority of triads are concentrated in the left side of the triad distribution</p>
<p>Let’s compare it our Add Health network.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">triad.census</span>(net59)</span></code></pre></div>
<pre><code>##  [1] 150776065   2416731    785249      3621      4325      5165      4028
##  [8]      3619       450        23      1019       294       320       137
## [15]       385       144</code></pre>
<p>Which triads are common in our network, but not in the random graph? What might this tell us?</p>
</div>
<div id="random-graphs-galore" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Random graphs galore!</h2>
<p>One problem is that we are basing our analysis on a single random graph. Because edges are drawn randomly, there is a lot of variation in the structure of random graphs, especially when the number of nodes in the graph is small (less than one thousand).</p>
<p>What we really want is a distribution of random graphs and their triad censuses, against which our own could be compared. So let’s generate one hundred random graphs, and create a distribution of random graph triad censuses and see where our graph lies on that distribution</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-1" aria-hidden="true" tabindex="-1"></a>trial <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="dv">100</span>) <span class="co"># this creates a list with 100 spaces to store things.  We will store each result here. </span></span>
<span id="cb163-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trial) ){</span>
<span id="cb163-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  random_graph <span class="ot">&lt;-</span> <span class="fu">erdos.renyi.game</span>(<span class="at">n =</span> net59_n, <span class="at">p.or.m =</span> net59_density, <span class="at">directed =</span> <span class="cn">TRUE</span>) </span>
<span id="cb163-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  trial[[i]] <span class="ot">&lt;-</span> <span class="fu">triad.census</span>(random_graph) <span class="co"># We assign to the ith space the result. So for the first iteration, it will assign the result to the first space in the list</span></span>
<span id="cb163-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb163-7"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-8"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-8" aria-hidden="true" tabindex="-1"></a>trial_df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, trial) <span class="co"># We can use the do.call and &quot;rbind&quot; functions together to combine all of the results into a matrix, where each row is one of our trials</span></span>
<span id="cb163-9"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-10"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(trial_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;003&quot;</span>, <span class="st">&quot;012&quot;</span>, <span class="st">&quot;102&quot;</span>, <span class="st">&quot;021D&quot;</span>, <span class="st">&quot;021U&quot;</span>, <span class="st">&quot;021C&quot;</span>, <span class="st">&quot;111D&quot;</span>, <span class="st">&quot;111U&quot;</span>, <span class="st">&quot;030T&quot;</span>, <span class="st">&quot;030C&quot;</span>, <span class="st">&quot;201&quot;</span>, <span class="st">&quot;120D&quot;</span>, <span class="st">&quot;120U&quot;</span>, <span class="st">&quot;120C&quot;</span>, <span class="st">&quot;210&quot;</span>, <span class="st">&quot;300&quot;</span>) <span class="co"># It is worth naming the columns too.</span></span>
<span id="cb163-11"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-12"><a href="transitivity-structural-balance-and-hierarchy.html#cb163-12" aria-hidden="true" tabindex="-1"></a>trial_df_w_observed <span class="ot">&lt;-</span> <span class="fu">rbind</span>(trial_df, <span class="fu">as.numeric</span>(<span class="fu">triad.census</span>(net59))) <span class="co"># add in the observed results</span></span></code></pre></div>
<p>Now we have this 100 row dataset of simulation results with the observed results tacked on at the end (of course, we could have done 1,000 or 10,000 iterations!) Let’s produce, for each column, some simple statistics, like a mean and a confidence interval.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First, standardize all of the columns by dividing each of their values by the largest value in that column, so that each will be on a similar scale (0 to 1), we can visualize them meaningfully </span></span>
<span id="cb164-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-2" aria-hidden="true" tabindex="-1"></a>trial_df_w_observed <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(trial_df_w_observed)</span>
<span id="cb164-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-4" aria-hidden="true" tabindex="-1"></a>trial_df_w_observed[,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(trial_df_w_observed)] <span class="ot">&lt;-</span> <span class="fu">sapply</span>(trial_df_w_observed[,<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trial_df_w_observed)], <span class="cf">function</span>(x) x<span class="sc">/</span><span class="fu">max</span>(x))</span>
<span id="cb164-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then split the observed from the simulation results</span></span>
<span id="cb164-7"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-7" aria-hidden="true" tabindex="-1"></a>trial_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(trial_df_w_observed[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,])</span>
<span id="cb164-8"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-8" aria-hidden="true" tabindex="-1"></a>observed <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(trial_df_w_observed[<span class="dv">101</span>,])</span>
<span id="cb164-9"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-10"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the simulation results and add the observed data set back in for comparison</span></span>
<span id="cb164-11"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-11" aria-hidden="true" tabindex="-1"></a>summarized_stats <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">TriadType =</span> <span class="fu">colnames</span>(trial_df), </span>
<span id="cb164-12"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-12" aria-hidden="true" tabindex="-1"></a>                               <span class="at">Means =</span> <span class="fu">sapply</span>(trial_df, mean), </span>
<span id="cb164-13"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">LowerCI =</span> <span class="fu">sapply</span>(trial_df, <span class="cf">function</span>(x) <span class="fu">quantile</span>(x, <span class="fl">0.05</span>)),</span>
<span id="cb164-14"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">UpperCI =</span> <span class="fu">sapply</span>(trial_df, <span class="cf">function</span>(x) <span class="fu">quantile</span>(x, <span class="fl">0.95</span>)), </span>
<span id="cb164-15"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-15" aria-hidden="true" tabindex="-1"></a>                               <span class="at">Observed =</span> observed) </span>
<span id="cb164-16"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-17"><a href="transitivity-structural-balance-and-hierarchy.html#cb164-17" aria-hidden="true" tabindex="-1"></a>summarized_stats</span></code></pre></div>
<pre><code>##      TriadType        Means     LowerCI      UpperCI  Observed
## 003        003 0.9948112794 0.994230237 0.9953703278 1.0000000
## 012        012 0.9693179524 0.949169986 0.9900488583 0.5908888
## 102        102 0.0103958999 0.004860879 0.0169992576 1.0000000
## 021D      021D 0.9485477043 0.903033757 0.9921903832 0.3930316
## 021U      021U 0.9345077055 0.891732663 0.9837596318 0.4628639
## 021C      021C 0.9424454761 0.905085295 0.9888388037 0.2788275
## 111D      111D 0.0181429990 0.007696127 0.0285129096 1.0000000
## 111U      111U 0.0199281569 0.009381044 0.0317905499 1.0000000
## 030T      030T 0.1721555556 0.135444444 0.2044444444 1.0000000
## 030C      030C 0.6571794872 0.485897436 0.8987179487 0.5897436
## 201        201 0.0001570167 0.000000000 0.0009813543 1.0000000
## 120D      120D 0.0005102041 0.000000000 0.0034013605 1.0000000
## 120U      120U 0.0002812500 0.000000000 0.0031250000 1.0000000
## 120C      120C 0.0021167883 0.000000000 0.0072992701 1.0000000
## 210        210 0.0000000000 0.000000000 0.0000000000 1.0000000
## 300        300 0.0000000000 0.000000000 0.0000000000 1.0000000</code></pre>
<p>Now that we have this dataset, we can use ggplot to plot it.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb166-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summarized_stats) <span class="sc">+</span> </span>
<span id="cb166-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>TriadType, <span class="at">y=</span>Means, <span class="at">colour=</span>TriadType)) <span class="sc">+</span> </span>
<span id="cb166-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">x =</span> TriadType, <span class="at">ymin=</span>LowerCI, <span class="at">ymax=</span>UpperCI, <span class="at">colour=</span>TriadType), <span class="at">width=</span>.<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb166-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>TriadType, <span class="at">y=</span>Observed, <span class="at">colour=</span><span class="st">&quot;Observed&quot;</span>)) <span class="sc">+</span></span>
<span id="cb166-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb166-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-104-1.png" width="672" />
Beautiful! What do you see? Which triads are more or less common in our graph than in a random graph? What might this tell us about the macro-structure?</p>
</div>
<div id="producing-a-tau-statistic" class="section level2" number="11.6">
<h2><span class="header-section-number">11.6</span> Producing a tau statistic</h2>
<p>Given a weighting scheme, which values some triads and not others, we can evaluate whether our network fits a macrolevel model of our choice.
For example, below is a weighting scheme for the ranked-clustering weighting scheme, drawn from Daniel A. McFarland, et al. “Network Ecology and Adolescent Social Structure”. We can compare this to that produced by a random graph to see if our tau count is more or less than we should expect by chance.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb167-1" aria-hidden="true" tabindex="-1"></a>weighting_scheme <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb167-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb167-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">triad.census</span>(net59) <span class="sc">*</span> weighting_scheme)</span></code></pre></div>
<pre><code>## [1] 3845</code></pre>
</div>
<div id="banning-triads" class="section level2" number="11.7">
<h2><span class="header-section-number">11.7</span> Banning triads</h2>
<p>What if we want to ban some triads, but allow others? How might we go about building a simulation that does that? Below is an example. The basic idea is to sample nodes, draw an edge randomly with some probability (i.e. to control density), and then choose to keep or delete that edge, depending on if the triangles that it produces are allowed or not.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A basic function which prevents the formation of specified triads in a random graph simulation</span></span>
<span id="cb169-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-2" aria-hidden="true" tabindex="-1"></a>banning_triads_game <span class="ot">=</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">porm =</span> .<span class="dv">05</span>, <span class="at">banned =</span> <span class="fu">c</span>(<span class="dv">2</span>), <span class="at">sim_max =</span> <span class="dv">1000000</span>, <span class="at">probrecip =</span> .<span class="dv">5</span>){</span>
<span id="cb169-3"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-4"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(igraph) <span class="co"># Ensures igraph is loaded</span></span>
<span id="cb169-5"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-6"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">c</span>(<span class="dv">1</span>) <span class="sc">%in%</span> banned)){</span>
<span id="cb169-7"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Can&#39;t ban 003s&quot;</span>) <span class="co"># Stops the simulation if the user tried to bad 003 or 012 triads</span></span>
<span id="cb169-8"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb169-9"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-10"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-10" aria-hidden="true" tabindex="-1"></a>  num_edges <span class="ot">=</span> <span class="fu">round</span>(n<span class="sc">*</span>(n<span class="dv">-1</span>)<span class="sc">*</span>porm, <span class="dv">2</span>) <span class="co"># calculates the desired number of edges according to the N and Porm parameters</span></span>
<span id="cb169-11"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-12"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-12" aria-hidden="true" tabindex="-1"></a>  net <span class="ot">=</span> <span class="fu">make_empty_graph</span>(<span class="at">n =</span> n, <span class="at">directed =</span> <span class="cn">TRUE</span>) <span class="co"># initializes an empty network</span></span>
<span id="cb169-13"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-14"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-14" aria-hidden="true" tabindex="-1"></a>  edge_count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb169-15"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-15" aria-hidden="true" tabindex="-1"></a>  sim_count <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb169-16"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-17"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(edge_count <span class="sc">&lt;</span> num_edges){ <span class="co"># Begins a loop, which ends once the requisite number of edges is reached. </span></span>
<span id="cb169-18"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-19"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This part samples two nodes, checks whether the two sampled nodes are the same node, and whether an edge is already present in the network between these nodes</span></span>
<span id="cb169-20"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-21"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-21" aria-hidden="true" tabindex="-1"></a>    uniq <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb169-22"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-22" aria-hidden="true" tabindex="-1"></a>    edge_present <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb169-23"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span>(uniq <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">|</span> edge_present <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb169-24"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-24" aria-hidden="true" tabindex="-1"></a>      edge_id <span class="ot">=</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>n, <span class="dv">2</span>, <span class="at">replace =</span> T)</span>
<span id="cb169-25"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-25" aria-hidden="true" tabindex="-1"></a>      uniq <span class="ot">=</span> edge_id[<span class="dv">1</span>] <span class="sc">==</span> edge_id[<span class="dv">2</span>]</span>
<span id="cb169-26"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-26" aria-hidden="true" tabindex="-1"></a>      reciprocated <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>probrecip, probrecip))</span>
<span id="cb169-27"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-27" aria-hidden="true" tabindex="-1"></a>      edge_present_1 <span class="ot">=</span> <span class="fu">are.connected</span>(net, edge_id[<span class="dv">1</span>], edge_id[<span class="dv">2</span>])</span>
<span id="cb169-28"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-28" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (reciprocated){</span>
<span id="cb169-29"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-29" aria-hidden="true" tabindex="-1"></a>        edge_present_2 <span class="ot">=</span> <span class="fu">are.connected</span>(net, edge_id[<span class="dv">2</span>], edge_id[<span class="dv">1</span>])</span>
<span id="cb169-30"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-30" aria-hidden="true" tabindex="-1"></a>        edge_present <span class="ot">=</span> edge_present_1<span class="sc">|</span>edge_present_2</span>
<span id="cb169-31"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-31" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb169-32"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-32" aria-hidden="true" tabindex="-1"></a>        edge_present <span class="ot">=</span> edge_present_1</span>
<span id="cb169-33"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-33" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb169-34"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb169-35"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-36"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculates the traid census for the network before adding an edge</span></span>
<span id="cb169-37"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-37" aria-hidden="true" tabindex="-1"></a>    before <span class="ot">=</span> <span class="fu">triad.census</span>(net)</span>
<span id="cb169-38"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-38" aria-hidden="true" tabindex="-1"></a>    net_new <span class="ot">=</span> net <span class="sc">+</span> <span class="fu">edge</span>(edge_id) <span class="co"># Adds in the edge</span></span>
<span id="cb169-39"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(reciprocated){</span>
<span id="cb169-40"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-40" aria-hidden="true" tabindex="-1"></a>      edge_id_rev <span class="ot">=</span> edge_id[<span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>]</span>
<span id="cb169-41"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-41" aria-hidden="true" tabindex="-1"></a>      net_new <span class="ot">=</span> net_new <span class="sc">+</span> <span class="fu">edge</span>(edge_id_rev) <span class="co"># Adds in the edge</span></span>
<span id="cb169-42"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb169-43"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-43" aria-hidden="true" tabindex="-1"></a>    after <span class="ot">=</span> <span class="fu">triad.census</span>(net_new) <span class="co"># Calculates the triad census again</span></span>
<span id="cb169-44"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-44" aria-hidden="true" tabindex="-1"></a>    triad_diff <span class="ot">=</span> after <span class="sc">-</span> before <span class="co"># Checks to see how much the triad census changed</span></span>
<span id="cb169-45"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-46"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">all</span>(triad_diff[banned] <span class="sc">==</span> <span class="dv">0</span>)){</span>
<span id="cb169-47"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-47" aria-hidden="true" tabindex="-1"></a>      net <span class="ot">=</span> net_new <span class="co"># If the banned triads still aren&#39;t observed, then the new network is accepted.</span></span>
<span id="cb169-48"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb169-49"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-50"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-50" aria-hidden="true" tabindex="-1"></a>    edge_count <span class="ot">=</span> <span class="fu">ecount</span>(net) <span class="co"># number of edges updated</span></span>
<span id="cb169-51"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-51" aria-hidden="true" tabindex="-1"></a>    sim_count <span class="ot">=</span> sim_count <span class="sc">+</span> <span class="dv">1</span> <span class="co"># Simulation count updated</span></span>
<span id="cb169-52"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(sim_count <span class="sc">&gt;</span> sim_max){</span>
<span id="cb169-53"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(<span class="st">&quot;Warning: Failed to converge, banned triads may be incompatible&quot;</span>) <span class="co"># exits simulation if simulation max count is exceeded</span></span>
<span id="cb169-54"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(net)</span>
<span id="cb169-55"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-55" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb169-56"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb169-57"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(net) <span class="co"># Returns the simulated network</span></span>
<span id="cb169-58"><a href="transitivity-structural-balance-and-hierarchy.html#cb169-58" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Cool - let’s try it. Here, we ban three triad types.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb170-1" aria-hidden="true" tabindex="-1"></a>no_cycles <span class="ot">=</span> <span class="fu">banning_triads_game</span>(<span class="at">banned =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>))</span>
<span id="cb170-2"><a href="transitivity-structural-balance-and-hierarchy.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">triad_census</span>(no_cycles)</span></code></pre></div>
<pre><code>##  [1] 137110   3721  19259      0      0     17      0    147      0      1
## [11]   1382      0      2      1      9     51</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="transitivity-structural-balance-and-hierarchy.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(no_cycles, <span class="at">vertex.size =</span> <span class="dv">2</span>, <span class="at">vertex.label =</span> <span class="cn">NA</span>, <span class="at">vertex.color =</span> <span class="st">&quot;tomato&quot;</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="affiliation-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="centrality.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
