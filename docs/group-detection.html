<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Social Network Analysis</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Social Network Analysis">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Social Network Analysis" />
  <meta property="og:type" content="book" />



  <meta name="github-repo" content="markahoffman/social_network_analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Social Network Analysis" />
  <meta name="twitter:site" content="@mark_a_hoffman" />



<meta name="author" content="Peter Bearman and Mark Hoffman">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">


<link rel="prev" href="the-small-world-problem-and-the-art-science-of-simulation.html">
<link rel="next" href="blockmodeling.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html"><i class="fa fa-check"></i><b>1</b> Readings for the course</a><ul>
<li class="chapter" data-level="1.1" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-1-introduction-to-types-of-networks-and-strategies-for-analysis-articles-we-discussed"><i class="fa fa-check"></i><b>1.1</b> Day 1: Introduction to types of networks and strategies for analysis (Articles we discussed)</a></li>
<li class="chapter" data-level="1.2" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-2-part-1-ego-networks"><i class="fa fa-check"></i><b>1.2</b> Day 2: Part 1 – Ego-Networks</a></li>
<li class="chapter" data-level="1.3" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-2-part-2-balance-and-transitivity"><i class="fa fa-check"></i><b>1.3</b> Day 2 – Part 2 Balance and Transitivity</a></li>
<li class="chapter" data-level="1.4" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-3-part-1-centrality"><i class="fa fa-check"></i><b>1.4</b> Day 3: Part 1 Centrality</a></li>
<li class="chapter" data-level="1.5" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-3-part-2.-modularity-community-structure-and-small-worlds"><i class="fa fa-check"></i><b>1.5</b> Day 3: Part 2. Modularity, Community Structure and Small Worlds</a></li>
<li class="chapter" data-level="1.6" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-4-part-1-rectangular-matrices"><i class="fa fa-check"></i><b>1.6</b> Day 4: Part 1, Rectangular Matrices</a></li>
<li class="chapter" data-level="1.7" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-4-part-2-blockmodeling-multiple-relations"><i class="fa fa-check"></i><b>1.7</b> Day 4: Part 2 Blockmodeling Multiple Relations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Installing R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Downloading and Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tour-rstudio-with-udacity.html"><a href="tour-rstudio-with-udacity.html"><i class="fa fa-check"></i><b>3</b> Tour RStudio with Udacity</a></li>
<li class="chapter" data-level="4" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>4</b> R Basics</a><ul>
<li class="chapter" data-level="4.1" data-path="r-basics.html"><a href="r-basics.html#vectors-matrices-and-data.frames"><i class="fa fa-check"></i><b>4.1</b> Vectors, matrices and data.frames</a></li>
<li class="chapter" data-level="4.2" data-path="r-basics.html"><a href="r-basics.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>4.2</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="4.3" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>4.3</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html"><i class="fa fa-check"></i><b>5</b> Understanding network data structures</a><ul>
<li class="chapter" data-level="5.1" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#edge-lists"><i class="fa fa-check"></i><b>5.1</b> Edge lists</a></li>
<li class="chapter" data-level="5.2" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#adjacency-matrices"><i class="fa fa-check"></i><b>5.2</b> Adjacency matrices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="your-first-network.html"><a href="your-first-network.html"><i class="fa fa-check"></i><b>6</b> Your First Network</a><ul>
<li class="chapter" data-level="6.1" data-path="your-first-network.html"><a href="your-first-network.html#creating-a-project"><i class="fa fa-check"></i><b>6.1</b> Creating a project</a></li>
<li class="chapter" data-level="6.2" data-path="your-first-network.html"><a href="your-first-network.html#creating-data-in-excel"><i class="fa fa-check"></i><b>6.2</b> Creating data in Excel</a></li>
<li class="chapter" data-level="6.3" data-path="your-first-network.html"><a href="your-first-network.html#saving-excel-data-as-a-.csv-file"><i class="fa fa-check"></i><b>6.3</b> Saving Excel data as a .csv file</a></li>
<li class="chapter" data-level="6.4" data-path="your-first-network.html"><a href="your-first-network.html#loading-data-into-r"><i class="fa fa-check"></i><b>6.4</b> Loading data into R</a></li>
<li class="chapter" data-level="6.5" data-path="your-first-network.html"><a href="your-first-network.html#from-data-to-networks"><i class="fa fa-check"></i><b>6.5</b> From data to networks</a></li>
<li class="chapter" data-level="6.6" data-path="your-first-network.html"><a href="your-first-network.html#exploring-your-network"><i class="fa fa-check"></i><b>6.6</b> Exploring your network</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html"><i class="fa fa-check"></i><b>7</b> Network Visualization and Aesthetics</a><ul>
<li class="chapter" data-level="7.1" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#the-basics"><i class="fa fa-check"></i><b>7.1</b> The Basics</a></li>
<li class="chapter" data-level="7.2" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#layouts"><i class="fa fa-check"></i><b>7.2</b> Layouts</a></li>
<li class="chapter" data-level="7.3" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#adding-attributes-to-a-network-object"><i class="fa fa-check"></i><b>7.3</b> Adding attributes to a network object</a></li>
<li class="chapter" data-level="7.4" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#plotting-based-on-attributes"><i class="fa fa-check"></i><b>7.4</b> Plotting based on attributes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html"><i class="fa fa-check"></i><b>8</b> Measuring transitivity and structural balance</a><ul>
<li class="chapter" data-level="8.1" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#calculating-a-triad-census"><i class="fa fa-check"></i><b>8.1</b> Calculating a triad census</a></li>
<li class="chapter" data-level="8.2" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#generating-a-random-graph-for-comparison"><i class="fa fa-check"></i><b>8.2</b> Generating a random graph for comparison</a></li>
<li class="chapter" data-level="8.3" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#random-graphs-galore"><i class="fa fa-check"></i><b>8.3</b> Random graphs galore!</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="centrality.html"><a href="centrality.html"><i class="fa fa-check"></i><b>9</b> Centrality</a><ul>
<li class="chapter" data-level="9.0.1" data-path="centrality.html"><a href="centrality.html#loading-the-example-network"><i class="fa fa-check"></i><b>9.0.1</b> Loading the example network</a></li>
<li class="chapter" data-level="9.0.2" data-path="centrality.html"><a href="centrality.html#degree-centrality"><i class="fa fa-check"></i><b>9.0.2</b> Degree Centrality</a></li>
<li class="chapter" data-level="9.0.3" data-path="centrality.html"><a href="centrality.html#betweenness-centrality"><i class="fa fa-check"></i><b>9.0.3</b> Betweenness Centrality</a></li>
<li class="chapter" data-level="9.0.4" data-path="centrality.html"><a href="centrality.html#closeness-centrality"><i class="fa fa-check"></i><b>9.0.4</b> Closeness Centrality</a></li>
<li class="chapter" data-level="9.1" data-path="centrality.html"><a href="centrality.html#eigenvector-centrality"><i class="fa fa-check"></i><b>9.1</b> Eigenvector Centrality</a><ul>
<li class="chapter" data-level="9.1.1" data-path="centrality.html"><a href="centrality.html#measure-correlations"><i class="fa fa-check"></i><b>9.1.1</b> Measure Correlations</a></li>
<li class="chapter" data-level="9.1.2" data-path="centrality.html"><a href="centrality.html#centralization-and-degree-distributions"><i class="fa fa-check"></i><b>9.1.2</b> Centralization and Degree Distributions</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="centrality.html"><a href="centrality.html#reach"><i class="fa fa-check"></i><b>9.2</b> Reach</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="the-small-world-problem-and-the-art-science-of-simulation.html"><a href="the-small-world-problem-and-the-art-science-of-simulation.html"><i class="fa fa-check"></i><b>10</b> The Small World Problem and the Art-Science of Simulation</a><ul>
<li class="chapter" data-level="10.0.1" data-path="the-small-world-problem-and-the-art-science-of-simulation.html"><a href="the-small-world-problem-and-the-art-science-of-simulation.html#other-simulations"><i class="fa fa-check"></i><b>10.0.1</b> Other simulations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="group-detection.html"><a href="group-detection.html"><i class="fa fa-check"></i><b>11</b> Group detection</a><ul>
<li class="chapter" data-level="11.1" data-path="group-detection.html"><a href="group-detection.html#modularity"><i class="fa fa-check"></i><b>11.1</b> Modularity</a></li>
<li class="chapter" data-level="11.2" data-path="group-detection.html"><a href="group-detection.html#affiliation-data"><i class="fa fa-check"></i><b>11.2</b> Affiliation Data</a><ul>
<li class="chapter" data-level="11.2.1" data-path="group-detection.html"><a href="group-detection.html#unipartite-projection"><i class="fa fa-check"></i><b>11.2.1</b> Unipartite Projection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="blockmodeling.html"><a href="blockmodeling.html"><i class="fa fa-check"></i><b>12</b> Blockmodeling</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Social Network Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="group-detection" class="section level1">
<h1><span class="header-section-number">11</span> Group detection</h1>
<p>We often just want to find distinct groups of people. We might not require that everyone in a group is connected - it is too stringent. Instead, we could define groups as sets of nodes who have a higher proportion of edges going inwards than outwards - that is, solidarity is strongest within the group.</p>
<p>There are a plethora of group detection algorithms in igraph. I will cover some of them. The full list is: edge.betweenness.community, fastgreedy.community, label.propagation.community, leading.eigenvector.community, multilevel.community, optimal.community, spinglass.community, and walktrap.community.</p>
<p>This webpage has a summary of their pros and cons for an older version of igraph: <a href="http://bommaritollc.com/2012/06/summary-community-detection-algorithms-igraph-0-6/" class="uri">http://bommaritollc.com/2012/06/summary-community-detection-algorithms-igraph-0-6/</a></p>
<p>Essentially you should tailor your algorithm choice to your network. Certain algorithms are designed for directed or undirected graphs, and work better with small or large graphs. Each algorithm as its own igraph function. These functions produce lists with information about the algorithm results. Element 1 holds a vector that details which group each node is in, which I will refer to as the membership vector. Element 6 holds the modularity of the network given the group detection algorithm.</p>
<p>For undirected graphs, you can use the optimal or multilevel algorithms.</p>
<p>First we load our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(igraph)

florentine_edgelist &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;http://www.markanthonyhoffman.com/downloads/florentine_marriage_edgelist.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>, <span class="dt">row.names =</span> <span class="dv">1</span>)

florentine_attributes &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;http://www.markanthonyhoffman.com/downloads/florentine_attributes.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

marriageNet &lt;-<span class="st"> </span><span class="kw">graph_from_data_frame</span>(<span class="dt">d =</span> florentine_edgelist, <span class="dt">directed =</span> F, <span class="dt">vertices =</span> florentine_attributes)
marriageNet =<span class="st"> </span><span class="kw">simplify</span>(marriageNet)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">communityMulti &lt;-<span class="st"> </span><span class="kw">multilevel.community</span>(marriageNet)</code></pre></div>
<p>For directed graphs, edge betweenness is generally your best bet, though the walktrap algorithm performs well too.</p>
<p>We might wish to visualize the group structure of networks to see how the algorithms divide the network. To do so, we have to first extract the membership vector and put it in a format the plot function understands.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">communityMultiGroup &lt;-<span class="st"> </span><span class="kw">communities</span>(communityMulti)</code></pre></div>
<p>We can then use the mark.groups argument in plot to see the groups.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(marriageNet, <span class="dt">vertex.size =</span> <span class="dv">3</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>, <span class="dt">mark.groups =</span> communityMultiGroup)</code></pre></div>
<p><img src="Images/unnamed-chunk-98-1.png" width="672" /></p>
<p>Alternatively, we can just color the nodes by group membership. In this case, we can just use the membership vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">V</span>(marriageNet)$color &lt;-<span class="st"> </span><span class="kw">membership</span>(communityMulti)
<span class="kw">plot</span>(marriageNet, <span class="dt">vertex.size =</span> <span class="dv">3</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-99-1.png" width="672" /></p>
<p>This becomes less feasible as the number of groups increases!!</p>
<div id="modularity" class="section level2">
<h2><span class="header-section-number">11.1</span> Modularity</h2>
<p>Modularity takes a given group structure and calculates how separated the different groups are from each other. It therefore operationalizes our notion of groups above by calculating the proportion of ties that are within groups as opposed to between them. Networks with high modularity have dense connections between the nodes within modules but sparse connections between nodes in different modules.</p>
<p>We can think of modularity as both a measure of how effective a given grouping algorithm is - i.e. higher modularity means the alogrithm is identifying distinct, sociall separate groups. But it can also be thought of as a measure of the saliency of groups to the network in general. The higher modularity the more that groups structure the network. Modularity measures the extent to which a network can be divided into distinct modules or groups.</p>
<p>Getting a network’s modularity in igraph is easy!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">communityMulti &lt;-<span class="st"> </span><span class="kw">multilevel.community</span>(marriageNet)
communityMulti$modularity</code></pre></div>
<pre><code>## [1] 0.3662826 0.4929815 0.4992900</code></pre>
<p>We can either access the modularity score directly OR</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">modularity</span>(communityMulti) <span class="co"># We can use the modularity() function on a group detection output.</span></code></pre></div>
<pre><code>## [1] 0.49929</code></pre>

</div>
<div id="affiliation-data" class="section level2">
<h2><span class="header-section-number">11.2</span> Affiliation Data</h2>
<p>This portion of the tutorial focuses on affiliation data. Individuals can be directly linked to one another by affections or interactions. We have spent most of the class so far detailing and analyzing the various types of direct relations.</p>
<p>However, they can also be linked through “affiliations”, that is, shared associations to groups or objects.</p>
<p>As an example, people might be tied by the classes they have taken together. Such data might look like:</p>
<p>Person, Classes Leo, Biostatistics, Chemistry, Linear Algebra Clement, Islamic Civilization, The Modern World-System, Exile and Diaspora Paula, Calc 1, Calc 2, Linear Algebra, Filippo, Linear Algebra, Social Networks, The Modern World-System</p>
<p>We can create a network with two types of nodes - one set of nodes will be people, the other classes. People, in this network, cannot be directly tied to each other. Rather they are co-affiliated with a class, which serves as the basis of their connection. Therefore, all ties will be between nodes of different types.</p>
<p>To create this network, we need to turn the above data into an edgelist, convert it to a matrix, and plot it in igraph.</p>
<p>Let’s start with the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">classes_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&quot;Leo&quot;</span>, <span class="st">&quot;Clement&quot;</span>, <span class="st">&quot;Palla&quot;</span>, <span class="st">&quot;Filippo&quot;</span>), <span class="dt">class1 =</span> <span class="kw">c</span>(<span class="st">&quot;Biostatistics&quot;</span>,<span class="st">&quot;Islamic Civ&quot;</span>, <span class="st">&quot;Calc 1&quot;</span>, <span class="st">&quot;Linear Algebra&quot;</span>), <span class="dt">class2 =</span> <span class="kw">c</span>(<span class="st">&quot;Chemistry&quot;</span>, <span class="st">&quot;The Modern World-System&quot;</span>, <span class="st">&quot;Calc 2&quot;</span>, <span class="st">&quot;Social Networks&quot;</span>), <span class="dt">class3 =</span> <span class="kw">c</span>(<span class="st">&quot;Linear Algebra&quot;</span>, <span class="st">&quot;Exile and Diaspora&quot;</span>, <span class="st">&quot;Linear Algebra&quot;</span>, <span class="st">&quot;The Modern World-System&quot;</span>), <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

classes_data</code></pre></div>
<pre><code>##      name         class1                  class2                  class3
## 1     Leo  Biostatistics               Chemistry          Linear Algebra
## 2 Clement    Islamic Civ The Modern World-System      Exile and Diaspora
## 3   Palla         Calc 1                  Calc 2          Linear Algebra
## 4 Filippo Linear Algebra         Social Networks The Modern World-System</code></pre>
<p>The reshape packages will let us convert this type of data into an edgelist.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;reshape2&quot;)</span>
<span class="kw">library</span>(reshape2)
classes_data &lt;-<span class="st"> </span><span class="kw">melt</span>(classes_data, <span class="dt">measure.vars =</span> <span class="kw">c</span>(<span class="st">&quot;class1&quot;</span>, <span class="st">&quot;class2&quot;</span>,<span class="st">&quot;class3&quot;</span>), <span class="dt">value.name =</span> <span class="st">&quot;classes&quot;</span>, <span class="dt">variable.name =</span> <span class="st">&quot;order&quot;</span>)</code></pre></div>
<p>The ?melt function turns so called “short form data” into “long form”. It takes the class variables and combines them into a single variable “classes”. We only need two columns, name and classes, so we use the subset function to select them. If we look at the data now, it is basically an edge list, in which people are on the left side and classes they are affiliated with on the right.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">classes_data &lt;-<span class="st"> </span><span class="kw">subset</span>(classes_data, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;classes&quot;</span>))</code></pre></div>
<p>Once we have such an edge list, we can then use the table function to turn it into an incidence matrix, which is what igraph needs to turn affiliation data into an igraph object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">classesMatrix =<span class="st"> </span><span class="kw">table</span>(classes_data)
<span class="kw">class</span>(classesMatrix) &lt;-<span class="st"> &quot;matrix&quot;</span> <span class="co"># And we convert it from a table to a matrix</span>

<span class="co"># View(classesMatrix)</span></code></pre></div>
<p>In an incidence matrix, the rows are of one class of node, while columns are of another. The rows are generally people who are affiliated with groups in the columns.</p>
<p>Using the get.incidence() function will turn our matrix into a bipartite network.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">classesNet &lt;-<span class="st"> </span><span class="kw">graph.incidence</span>(classesMatrix, <span class="dt">mode =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>))
<span class="kw">plot</span>(classesNet, <span class="dt">vertex.label.cex =</span> .<span class="dv">6</span>, <span class="dt">vertex.label.color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-106-1.png" width="672" /></p>
<p>We can change the shape of nodes to highlight their type.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">V</span>(classesNet)$shape &lt;-<span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">V</span>(classesNet)$type ==<span class="st"> </span><span class="ot">FALSE</span>, <span class="st">&quot;circle&quot;</span>, <span class="st">&quot;square&quot;</span>)
<span class="kw">plot</span>(classesNet,
<span class="dt">vertex.label.cex =</span> .<span class="dv">6</span>,
<span class="dt">vertex.label.color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-107-1.png" width="672" /></p>
<div id="unipartite-projection" class="section level3">
<h3><span class="header-section-number">11.2.1</span> Unipartite Projection</h3>
<p>Bipartite networks can be represented (or “projected”) as unipartite networks. In this case, either people will be the only nodes, and they will be connected if they share an affiliation (i.e. they are in the same group) OR groups willbe the only nodes and they will be connected if they share an affiliation to a person.</p>
<p>We can make the projection two ways - using the bipartite.projection() function in igraph, or by multiplying the incidence matrix by its transpose (or vise versa).</p>
<p>The mathematical operation to make a person-to-person projection is to multiply the initial matrix by its transpose. In R that looks like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">personMatrix =<span class="st"> </span>classesMatrix %*%<span class="st"> </span><span class="kw">t</span>(classesMatrix)
<span class="co"># View(personMatrix)</span></code></pre></div>
<p>where the t() function transposes the matrix that is passed to it and %*% performs matrix multiplication.</p>
<p>The diagonal of this new matrix tells us the number of groups each person is affiliated with, but we set it to 0 using the ?diag function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(personMatrix) &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># View(personMatrix)</span></code></pre></div>
<p>To get the group-to-group matrix, we multiply the transpose by the initial matrix (reverse!)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">groupMatrix =<span class="st"> </span><span class="kw">t</span>(classesMatrix) %*%<span class="st"> </span>classesMatrix
<span class="co"># View(groupMatrix) # The diagonal details the number of people in each class</span>

<span class="kw">diag</span>(groupMatrix) &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># we again set it to 0</span></code></pre></div>
<p>Both of these operations turn our rectangular incidence matrix into a square adjacency matrix. Order matters. Now that we have adjacency matrices can use the graph.adjacency() function to turn them into network objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">personNet &lt;-<span class="st"> </span><span class="kw">graph.adjacency</span>(personMatrix, <span class="dt">mode =</span> <span class="st">&quot;undirected&quot;</span>)
groupNet &lt;-<span class="st"> </span><span class="kw">graph.adjacency</span>(groupMatrix, <span class="dt">mode =</span> <span class="st">&quot;undirected&quot;</span>)

<span class="kw">plot</span>(personNet, <span class="dt">vertex.label.cex =</span> .<span class="dv">6</span>, <span class="dt">vertex.label.color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-111-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(groupNet, <span class="dt">vertex.label.cex =</span> .<span class="dv">6</span>, <span class="dt">vertex.label.color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-111-2.png" width="672" /></p>
<p>We can analyze these networks just like we would any other network with a single node type.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-small-world-problem-and-the-art-science-of-simulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="blockmodeling.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
