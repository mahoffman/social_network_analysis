<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Social Network Analysis</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Social Network Analysis">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Social Network Analysis" />
  <meta property="og:type" content="book" />



  <meta name="github-repo" content="markahoffman/social_network_analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Social Network Analysis" />
  <meta name="twitter:site" content="@mark_a_hoffman" />



<meta name="author" content="Peter Bearman and Mark Hoffman">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">


<link rel="prev" href="centrality.html">
<link rel="next" href="group-detection.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html"><i class="fa fa-check"></i><b>1</b> Readings for the course</a><ul>
<li class="chapter" data-level="1.1" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-1-introduction-to-types-of-networks-and-strategies-for-analysis-articles-we-discussed"><i class="fa fa-check"></i><b>1.1</b> Day 1: Introduction to types of networks and strategies for analysis (Articles we discussed)</a></li>
<li class="chapter" data-level="1.2" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-2-part-1-ego-networks"><i class="fa fa-check"></i><b>1.2</b> Day 2: Part 1 – Ego-Networks</a></li>
<li class="chapter" data-level="1.3" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-2-part-2-balance-and-transitivity"><i class="fa fa-check"></i><b>1.3</b> Day 2 – Part 2 Balance and Transitivity</a></li>
<li class="chapter" data-level="1.4" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-3-part-1-centrality"><i class="fa fa-check"></i><b>1.4</b> Day 3: Part 1 Centrality</a></li>
<li class="chapter" data-level="1.5" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-3-part-2.-modularity-community-structure-and-small-worlds"><i class="fa fa-check"></i><b>1.5</b> Day 3: Part 2. Modularity, Community Structure and Small Worlds</a></li>
<li class="chapter" data-level="1.6" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-4-part-1-rectangular-matrices"><i class="fa fa-check"></i><b>1.6</b> Day 4: Part 1, Rectangular Matrices</a></li>
<li class="chapter" data-level="1.7" data-path="readings-for-the-course.html"><a href="readings-for-the-course.html#day-4-part-2-blockmodeling-multiple-relations"><i class="fa fa-check"></i><b>1.7</b> Day 4: Part 2 Blockmodeling Multiple Relations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Installing R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#downloading-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Downloading and Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tour-rstudio-with-udacity.html"><a href="tour-rstudio-with-udacity.html"><i class="fa fa-check"></i><b>3</b> Tour RStudio with Udacity</a></li>
<li class="chapter" data-level="4" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>4</b> R Basics</a><ul>
<li class="chapter" data-level="4.1" data-path="r-basics.html"><a href="r-basics.html#vectors-matrices-and-data.frames"><i class="fa fa-check"></i><b>4.1</b> Vectors, matrices and data.frames</a></li>
<li class="chapter" data-level="4.2" data-path="r-basics.html"><a href="r-basics.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>4.2</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="4.3" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>4.3</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html"><i class="fa fa-check"></i><b>5</b> Understanding network data structures</a><ul>
<li class="chapter" data-level="5.1" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#edge-lists"><i class="fa fa-check"></i><b>5.1</b> Edge lists</a></li>
<li class="chapter" data-level="5.2" data-path="understanding-network-data-structures.html"><a href="understanding-network-data-structures.html#adjacency-matrices"><i class="fa fa-check"></i><b>5.2</b> Adjacency matrices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="your-first-network.html"><a href="your-first-network.html"><i class="fa fa-check"></i><b>6</b> Your First Network</a><ul>
<li class="chapter" data-level="6.1" data-path="your-first-network.html"><a href="your-first-network.html#creating-a-project"><i class="fa fa-check"></i><b>6.1</b> Creating a project</a></li>
<li class="chapter" data-level="6.2" data-path="your-first-network.html"><a href="your-first-network.html#creating-data-in-excel"><i class="fa fa-check"></i><b>6.2</b> Creating data in Excel</a></li>
<li class="chapter" data-level="6.3" data-path="your-first-network.html"><a href="your-first-network.html#saving-excel-data-as-a-.csv-file"><i class="fa fa-check"></i><b>6.3</b> Saving Excel data as a .csv file</a></li>
<li class="chapter" data-level="6.4" data-path="your-first-network.html"><a href="your-first-network.html#loading-data-into-r"><i class="fa fa-check"></i><b>6.4</b> Loading data into R</a></li>
<li class="chapter" data-level="6.5" data-path="your-first-network.html"><a href="your-first-network.html#from-data-to-networks"><i class="fa fa-check"></i><b>6.5</b> From data to networks</a></li>
<li class="chapter" data-level="6.6" data-path="your-first-network.html"><a href="your-first-network.html#exploring-your-network"><i class="fa fa-check"></i><b>6.6</b> Exploring your network</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html"><i class="fa fa-check"></i><b>7</b> Network Visualization and Aesthetics</a><ul>
<li class="chapter" data-level="7.1" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#the-basics"><i class="fa fa-check"></i><b>7.1</b> The Basics</a></li>
<li class="chapter" data-level="7.2" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#layouts"><i class="fa fa-check"></i><b>7.2</b> Layouts</a></li>
<li class="chapter" data-level="7.3" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#adding-attributes-to-a-network-object"><i class="fa fa-check"></i><b>7.3</b> Adding attributes to a network object</a></li>
<li class="chapter" data-level="7.4" data-path="network-visualization-and-aesthetics.html"><a href="network-visualization-and-aesthetics.html#plotting-based-on-attributes"><i class="fa fa-check"></i><b>7.4</b> Plotting based on attributes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html"><i class="fa fa-check"></i><b>8</b> Measuring transitivity and structural balance</a><ul>
<li class="chapter" data-level="8.1" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#calculating-a-triad-census"><i class="fa fa-check"></i><b>8.1</b> Calculating a triad census</a></li>
<li class="chapter" data-level="8.2" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#generating-a-random-graph-for-comparison"><i class="fa fa-check"></i><b>8.2</b> Generating a random graph for comparison</a></li>
<li class="chapter" data-level="8.3" data-path="measuring-transitivity-and-structural-balance.html"><a href="measuring-transitivity-and-structural-balance.html#random-graphs-galore"><i class="fa fa-check"></i><b>8.3</b> Random graphs galore!</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="centrality.html"><a href="centrality.html"><i class="fa fa-check"></i><b>9</b> Centrality</a><ul>
<li class="chapter" data-level="9.0.1" data-path="centrality.html"><a href="centrality.html#loading-the-example-network"><i class="fa fa-check"></i><b>9.0.1</b> Loading the example network</a></li>
<li class="chapter" data-level="9.0.2" data-path="centrality.html"><a href="centrality.html#degree-centrality"><i class="fa fa-check"></i><b>9.0.2</b> Degree Centrality</a></li>
<li class="chapter" data-level="9.0.3" data-path="centrality.html"><a href="centrality.html#betweenness-centrality"><i class="fa fa-check"></i><b>9.0.3</b> Betweenness Centrality</a></li>
<li class="chapter" data-level="9.0.4" data-path="centrality.html"><a href="centrality.html#closeness-centrality"><i class="fa fa-check"></i><b>9.0.4</b> Closeness Centrality</a></li>
<li class="chapter" data-level="9.1" data-path="centrality.html"><a href="centrality.html#eigenvector-centrality"><i class="fa fa-check"></i><b>9.1</b> Eigenvector Centrality</a><ul>
<li class="chapter" data-level="9.1.1" data-path="centrality.html"><a href="centrality.html#measure-correlations"><i class="fa fa-check"></i><b>9.1.1</b> Measure Correlations</a></li>
<li class="chapter" data-level="9.1.2" data-path="centrality.html"><a href="centrality.html#centralization-and-degree-distributions"><i class="fa fa-check"></i><b>9.1.2</b> Centralization and Degree Distributions</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="centrality.html"><a href="centrality.html#reach"><i class="fa fa-check"></i><b>9.2</b> Reach</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="the-small-world-problem-and-the-art-science-of-simulation.html"><a href="the-small-world-problem-and-the-art-science-of-simulation.html"><i class="fa fa-check"></i><b>10</b> The Small World Problem and the Art-Science of Simulation</a><ul>
<li class="chapter" data-level="10.0.1" data-path="the-small-world-problem-and-the-art-science-of-simulation.html"><a href="the-small-world-problem-and-the-art-science-of-simulation.html#other-simulations"><i class="fa fa-check"></i><b>10.0.1</b> Other simulations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="group-detection.html"><a href="group-detection.html"><i class="fa fa-check"></i><b>11</b> Group detection</a><ul>
<li class="chapter" data-level="11.1" data-path="group-detection.html"><a href="group-detection.html#modularity"><i class="fa fa-check"></i><b>11.1</b> Modularity</a></li>
<li class="chapter" data-level="11.2" data-path="group-detection.html"><a href="group-detection.html#affiliation-data"><i class="fa fa-check"></i><b>11.2</b> Affiliation Data</a><ul>
<li class="chapter" data-level="11.2.1" data-path="group-detection.html"><a href="group-detection.html#unipartite-projection"><i class="fa fa-check"></i><b>11.2.1</b> Unipartite Projection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="blockmodeling.html"><a href="blockmodeling.html"><i class="fa fa-check"></i><b>12</b> Blockmodeling</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Social Network Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-small-world-problem-and-the-art-science-of-simulation" class="section level1">
<h1><span class="header-section-number">10</span> The Small World Problem and the Art-Science of Simulation</h1>
<p>Real-world social networks tend to be small worlds. In a small world, people are clustered in groups, but despite this, are still, on average, socially proximate. For example, you might think that you are socially (and spatially) distant from a random villager in India, but find that through a series of steps, you could reach that villager. The villager lives in her own small world and you live in yours, and yet you are mutually reachable. This is referred to as “the Small-World Phenomenon”.</p>
<p>Duncan Watts in his landmark paper explains this phenomenon. He begins with most clustered (and yet connected graph) imaginable - a “caveman” structure. There are groups of people clustered together and connected by only one or two connections to other groups.</p>
<p>Sadly, igraph doesn’t have a function for simulating caveman structures, so I quickly wrote one myself. In this caveman structure, all of the groups will be the same size, so the number of people must be evenly divisible by the size of groups. The basic idea is to generate a bunch of fully connected groups and then connect them by an edge or two so that they are arrayed around a circle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simulate_caveman &lt;-<span class="st"> </span>function(<span class="dt">n =</span> <span class="dv">25</span>, <span class="dt">clique_size =</span> <span class="dv">5</span>){
  <span class="kw">require</span>(igraph)
  <span class="co"># Groups are all the same size, so I check whether N is divisible by the size of groups</span>
  if ( ((n%/%clique_size) *<span class="st"> </span>clique_size) !=<span class="st"> </span>n){
    <span class="kw">stop</span>(<span class="st">&quot;n is not evenly divisible by clique_size&quot;</span>)
  }

  groups =<span class="st"> </span>n/clique_size <span class="co"># this determines the number of groups</span>

  el &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">PersonA =</span> <span class="dv">1</span>:n, <span class="dt">Group =</span> <span class="ot">NA</span>) <span class="co"># I create a dataframe which has people and the groups they are in</span>
  <span class="co"># I treat it like a person to group edgelist</span>

  group_vector =<span class="st"> </span><span class="kw">c</span>()
  for (i in <span class="dv">1</span>:groups){
    group_vector &lt;-<span class="st"> </span><span class="kw">c</span>(group_vector, <span class="kw">rep</span>(i, clique_size))
  }

  el$Group &lt;-<span class="st"> </span>group_vector

  inc &lt;-<span class="st"> </span><span class="kw">table</span>(el) <span class="co"># I use the table function to turn the person to group edgelist into an incidence matrix</span>
  adj &lt;-<span class="st"> </span>inc %*%<span class="st"> </span><span class="kw">t</span>(inc) <span class="co"># And I use matrix multiplication with the transpose to turn the person to group incidence matrix</span>
  <span class="co"># into a person to person adjacency matrix</span>

  <span class="kw">diag</span>(adj) &lt;-<span class="st"> </span><span class="dv">0</span>

  g &lt;-<span class="st"> </span><span class="kw">graph.adjacency</span>(adj, <span class="dt">mode =</span> <span class="st">&quot;undirected&quot;</span>) <span class="co"># I graph this matrix</span>

  group_connect &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> n, <span class="dt">by =</span> clique_size) <span class="co"># I determine the points of connection using a sequence funciton</span>

  for( i in <span class="dv">1</span>:(<span class="kw">length</span>(group_connect)-<span class="dv">1</span>)){
    p1 &lt;-<span class="st"> </span>group_connect[i] +<span class="st"> </span><span class="dv">1</span>
    p2 &lt;-<span class="st"> </span>group_connect[i<span class="dv">+1</span>]
    g &lt;-<span class="st"> </span><span class="kw">add.edges</span>(g, <span class="kw">c</span>(p1,p2)) <span class="co"># And I connect the points of connection using add.edges</span>
  }
    g &lt;-<span class="st"> </span><span class="kw">add.edges</span>(g, <span class="kw">c</span>(group_connect[<span class="dv">1</span>],(group_connect[groups]+<span class="dv">1</span>))) <span class="co"># finally I connect the ends of the structure so that it forms a circle</span>

    <span class="kw">return</span>(g)
}</code></pre></div>
<p>You don’t have to understand every part of this function in order to use it. All you need to do is run the function above so that it is in your R environment. You can then use it.</p>
<p>It has two arguments - number of nodes and the size of the groups. You could change clique_size to 4 or 10.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">caveman_net &lt;-<span class="st"> </span><span class="kw">simulate_caveman</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">clique_size =</span> <span class="dv">5</span>)
<span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))
<span class="kw">plot</span>(caveman_net, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(caveman_net), <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>, <span class="dt">vertex.color =</span> <span class="st">&quot;grey80&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-83-1.png" width="672" /></p>
<p>Now you can clearly see what a caveman structure is. Let’s analyze it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">graph.density</span>(caveman_net)</code></pre></div>
<pre><code>## [1] 0.04444444</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transitivity</span>(caveman_net) <span class="co"># transitivity() measures clustering coefficient, which essentially says, how clustered is the network overall</span></code></pre></div>
<pre><code>## [1] 0.7894737</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">average.path.length</span>(caveman_net)</code></pre></div>
<pre><code>## [1] 10.70101</code></pre>
<p>It has a pretty low density since most nodes only have connections within their clique or else one tie outwards. And as I mentioned above, caveman structures are extremely clustered, since most edges are within group.</p>
<p>Path length is also high - basically it takes 10 steps, on average, to reach one node from a random other node. In the real world, there are way more than 100 people and more than 20 groups, so it should be even more surprising that the average degree of separation is roughly six or seven steps. It follows that the “caveman structure” is not a small-world.</p>
<p>We can look at the diameter of the network to see this too. The diameter is the longest shortest path.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nodes.diameter&lt;-<span class="kw">get.diameter</span>(caveman_net)
<span class="kw">V</span>(caveman_net)[nodes.diameter]$color&lt;-<span class="st">&quot;darkgreen&quot;</span> <span class="co"># This assigns those nodes the color darkgreen.</span>
<span class="kw">plot</span>(caveman_net, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(caveman_net), <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-85-1.png" width="672" /></p>
<p>Let’s reset color.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">V</span>(caveman_net)$color &lt;-<span class="st"> &quot;orange&quot;</span></code></pre></div>
<p>Watts wants to get from this network structure, to one in which the average path length is much lower. He performs a simple exercise to do so (and one we have already experimented with). He randomly rewires the network so that it begins, slowly to approximate a random graph. Random graphs have low average path length; so this is a good idea.</p>
<p>We end up with a caveman structure with some number of rewired edges that will have the tendency to cut across the network</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">caveman_net_rewired &lt;-<span class="st">  </span><span class="kw">rewire</span>(caveman_net, <span class="kw">keeping_degseq</span>(<span class="dt">niter =</span> <span class="dv">1000</span>))</code></pre></div>
<p>We can use the rewire function to rewire the network. keeping_degseq() ensures that the degree distribution does not change and niter = 20 is the number of iterations (rewirings).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(caveman_net_rewired, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(caveman_net), <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label=</span><span class="ot">NA</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-88-1.png" width="672" /></p>
<p>Most of the rewirings cut across the network structure!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(caveman_net_rewired, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(caveman_net_rewired), <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label=</span><span class="ot">NA</span>) <span class="co"># Here it is laid out properly</span></code></pre></div>
<p><img src="Images/unnamed-chunk-89-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(caveman_net_rewired, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(caveman_net_rewired), <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>, <span class="dt">vertex.color =</span> <span class="st">&quot;grey80&quot;</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-89-2.png" width="672" /></p>
<p>Let’s compare this to the caveman network.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">graph.density</span>(caveman_net_rewired) </code></pre></div>
<pre><code>## [1] 0.04444444</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transitivity</span>(caveman_net_rewired) </code></pre></div>
<pre><code>## [1] 0.03552632</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">average.path.length</span>(caveman_net_rewired)</code></pre></div>
<pre><code>## [1] 3.309899</code></pre>
<p>Density is unchanged. Clustering coefficient is less than before, but still relatively high. And average.path.length was cut in half. Only 20 rewirings and look at the change!</p>
<p>We can analyze the change as we perform more rewirings.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">caveman_net_rewired &lt;-<span class="st"> </span><span class="kw">simulate_caveman</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">clique_size =</span> <span class="dv">10</span>)
avgpathlength &lt;-<span class="st"> </span><span class="kw">average.path.length</span>(caveman_net_rewired) <span class="co"># These are the first observation</span>
clusteringcoefficient &lt;-<span class="st"> </span><span class="kw">transitivity</span>(caveman_net_rewired)



iter =<span class="st"> </span><span class="dv">100</span>
for ( i in <span class="dv">2</span>:iter){
  caveman_net_rewired &lt;-<span class="st"> </span>caveman_net_rewired %&gt;%<span class="st"> </span><span class="kw">rewire</span>(<span class="kw">keeping_degseq</span>(<span class="dt">niter =</span> <span class="dv">1</span>))
  avgpathlength &lt;-<span class="st"> </span><span class="kw">c</span>(avgpathlength, <span class="kw">average.path.length</span>(caveman_net_rewired)) <span class="co"># We are just appending the result to a vector</span>
  clusteringcoefficient &lt;-<span class="st"> </span><span class="kw">c</span>(clusteringcoefficient, <span class="kw">transitivity</span>(caveman_net_rewired))
}

<span class="kw">plot</span>(<span class="dv">1</span>:<span class="dv">100</span>, avgpathlength, <span class="dt">xlab =</span> <span class="st">&quot;Numer of Rewirings&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Average Path Length&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Caveman&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)
<span class="kw">lines</span>(<span class="dv">1</span>:<span class="dv">100</span>, clusteringcoefficient)</code></pre></div>
<p><img src="Images/unnamed-chunk-91-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="dv">1</span>:<span class="dv">100</span>, clusteringcoefficient, <span class="dt">xlab =</span> <span class="st">&quot;Numer of Rewirings&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Clustering Coefficient&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Caveman&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</code></pre></div>
<p><img src="Images/unnamed-chunk-91-2.png" width="672" /></p>
<div id="other-simulations" class="section level3">
<h3><span class="header-section-number">10.0.1</span> Other simulations</h3>
<p>Simulations are used a lot in networks. We only talk in class about random nets and small-worlds, but there are many ideal-type networks. The third most famous is the “scale-free” network. “scale-free networks” are also known as hub-based networks, because they have a few actors with high degree and many actors with low degree. They are therefore highly centralized, and generally have low clustering.</p>
<p>igraph has a built in function to generate this class of networks: barabasi.game()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scalefree &lt;-<span class="st"> </span><span class="kw">barabasi.game</span>(<span class="dt">n=</span><span class="dv">100</span>, <span class="dt">m=</span><span class="dv">5</span>)
<span class="kw">plot</span>(scalefree, <span class="dt">vertex.size =</span> <span class="dv">3</span>, <span class="dt">layout =</span> <span class="kw">layout.kamada.kawai</span>(scalefree), <span class="dt">edge.arrow.size =</span> .<span class="dv">1</span>, <span class="dt">vertex.label=</span><span class="ot">NA</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-92-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">graph.density</span>(scalefree)</code></pre></div>
<pre><code>## [1] 0.0489899</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transitivity</span>(scalefree) </code></pre></div>
<pre><code>## [1] 0.1863455</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">average.path.length</span>(scalefree)</code></pre></div>
<pre><code>## [1] 1.830935</code></pre>
<p>Density, when m = 5, is roughly the same as the small-world network. Clustering coefficient is much lower. And average path length is short, because people can access almost everyone else via the hubs in the network.</p>
<p>Look for other games in the igraph manual… or, you can write your own like we did above.</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># A basic function which prevents the formation of specified triads in a random graph simulation</span>
banning_triads_game =<span class="st"> </span>function(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">porm =</span> .<span class="dv">05</span>, <span class="dt">banned =</span> <span class="kw">c</span>(<span class="dv">2</span>), <span class="dt">sim_max =</span> <span class="dv">1000000</span>, <span class="dt">probrecip =</span> .<span class="dv">5</span>){

  <span class="kw">require</span>(igraph) <span class="co"># Ensures igraph is loaded</span>

  if(<span class="kw">any</span>(<span class="kw">c</span>(<span class="dv">1</span>) %in%<span class="st"> </span>banned)){
    <span class="kw">stop</span>(<span class="st">&quot;Can&#39;t ban 003s&quot;</span>) <span class="co"># Stops the simulation if the user tried to bad 003 or 012 triads</span>
  }

  num_edges =<span class="st"> </span><span class="kw">round</span>(n*(n<span class="dv">-1</span>)*porm, <span class="dv">2</span>) <span class="co"># calculates the desired number of edges according to the N and Porm parameters</span>

  net =<span class="st"> </span><span class="kw">make_empty_graph</span>(<span class="dt">n =</span> n, <span class="dt">directed =</span> <span class="ot">TRUE</span>) <span class="co"># initializes an empty network</span>

  edge_count =<span class="st"> </span><span class="dv">0</span>
  sim_count =<span class="st"> </span><span class="dv">0</span>

  while(edge_count &lt;<span class="st"> </span>num_edges){ <span class="co"># Begins a loop, which ends once the requisite number of edges is reached. </span>

    <span class="co"># This part samples two nodes, checks whether the two sampled nodes are the same node, and whether an edge is already present in the network between these nodes</span>

    uniq =<span class="st"> </span><span class="ot">TRUE</span>
    edge_present =<span class="st"> </span><span class="ot">TRUE</span>
    while(uniq ==<span class="st"> </span><span class="ot">TRUE</span> |<span class="st"> </span>edge_present ==<span class="st"> </span><span class="ot">TRUE</span>){
      edge_id =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:n, <span class="dv">2</span>, <span class="dt">replace =</span> T)
      uniq =<span class="st"> </span>edge_id[<span class="dv">1</span>] ==<span class="st"> </span>edge_id[<span class="dv">2</span>]
      reciprocated =<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="dv">1</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">1</span>-probrecip, probrecip))
      edge_present_1 =<span class="st"> </span><span class="kw">are.connected</span>(net, edge_id[<span class="dv">1</span>], edge_id[<span class="dv">2</span>])
      if (reciprocated){
        edge_present_2 =<span class="st"> </span><span class="kw">are.connected</span>(net, edge_id[<span class="dv">2</span>], edge_id[<span class="dv">1</span>])
        edge_present =<span class="st"> </span>edge_present_1|edge_present_2
      } else {
        edge_present =<span class="st"> </span>edge_present_1
      }
    }

    <span class="co"># Calculates the traid census for the network before adding an edge</span>
    before =<span class="st"> </span><span class="kw">triad.census</span>(net)
    net_new =<span class="st"> </span>net +<span class="st"> </span><span class="kw">edge</span>(edge_id) <span class="co"># Adds in the edge</span>
    if(reciprocated){
      edge_id_rev =<span class="st"> </span>edge_id[<span class="dv">2</span>:<span class="dv">1</span>]
      net_new =<span class="st"> </span>net_new +<span class="st"> </span><span class="kw">edge</span>(edge_id_rev) <span class="co"># Adds in the edge</span>
    }
    after =<span class="st"> </span><span class="kw">triad.census</span>(net_new) <span class="co"># Calculates the triad census again</span>
    triad_diff =<span class="st"> </span>after -<span class="st"> </span>before <span class="co"># Checks to see how much the triad census changed</span>

    if(<span class="kw">all</span>(triad_diff[banned] ==<span class="st"> </span><span class="dv">0</span>)){
      net =<span class="st"> </span>net_new <span class="co"># If the banned triads still aren&#39;t observed, then the new network is accepted.</span>
    }

    edge_count =<span class="st"> </span><span class="kw">ecount</span>(net) <span class="co"># number of edges updated</span>
    sim_count =<span class="st"> </span>sim_count +<span class="st"> </span><span class="dv">1</span> <span class="co"># Simulation count updated</span>
    if(sim_count &gt;<span class="st"> </span>sim_max){
      <span class="kw">print</span>(<span class="st">&quot;Warning: Failed to converge, banned triads may be incompatible&quot;</span>) <span class="co"># exits simulation if simulation max count is exceeded</span>
      <span class="kw">return</span>(net)
    }
  }
  <span class="kw">return</span>(net) <span class="co"># Returns the simulated network</span>
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">no_cycles =<span class="st"> </span><span class="kw">banning_triads_game</span>(<span class="dt">banned =</span> <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>))
<span class="kw">triad_census</span>(no_cycles)</code></pre></div>
<pre><code>##  [1] 136937   4228  18830      0      0     14      0    229      1      0
## [11]   1372      0      4      1     10     74</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(no_cycles, <span class="dt">vertex.size =</span> <span class="dv">2</span>, <span class="dt">vertex.label =</span> <span class="ot">NA</span>, <span class="dt">vertex.color =</span> <span class="st">&quot;tomato&quot;</span>, <span class="dt">edge.arrow.size =</span> .<span class="dv">2</span>)</code></pre></div>
<p><img src="Images/unnamed-chunk-94-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="centrality.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="group-detection.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
